var Rr=Object.defineProperty;var $r=(t,e,o)=>e in t?Rr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var Mt=(t,e,o)=>($r(t,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function o(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(l){if(l.ep)return;l.ep=!0;const a=o(l);fetch(l.href,a)}})();function ze(){}function sr(t){return t()}function Ln(){return Object.create(null)}function Ve(t){t.forEach(sr)}function Dt(t){return typeof t=="function"}function lt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function kr(t){return Object.keys(t).length===0}function An(t){return t&&Dt(t.destroy)?t.destroy:ze}function R(t,e){t.appendChild(e)}function Se(t,e,o){t.insertBefore(e,o||null)}function Oe(t){t.parentNode&&t.parentNode.removeChild(t)}function U(t){return document.createElement(t)}function st(t){return document.createTextNode(t)}function ae(){return st(" ")}function qt(){return st("")}function Et(t,e,o,i){return t.addEventListener(e,o,i),()=>t.removeEventListener(e,o,i)}function G(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function Br(t){return Array.from(t.childNodes)}function Gt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Mn(t,e,o,i){o==null?t.style.removeProperty(e):t.style.setProperty(e,o,i?"important":"")}let St;function Tt(t){St=t}function Cr(){if(!St)throw new Error("Function called outside component initialization");return St}function vr(t){Cr().$$.on_mount.push(t)}const gt=[],ie=[];let _t=[];const gn=[],Fr=Promise.resolve();let _n=!1;function Lr(){_n||(_n=!0,Fr.then(lr))}function yn(t){_t.push(t)}function fe(t){gn.push(t)}const dn=new Set;let ht=0;function lr(){if(ht!==0)return;const t=St;do{try{for(;ht<gt.length;){const e=gt[ht];ht++,Tt(e),Mr(e.$$)}}catch(e){throw gt.length=0,ht=0,e}for(Tt(null),gt.length=0,ht=0;ie.length;)ie.pop()();for(let e=0;e<_t.length;e+=1){const o=_t[e];dn.has(o)||(dn.add(o),o())}_t.length=0}while(gt.length);for(;gn.length;)gn.pop()();_n=!1,dn.clear(),Tt(t)}function Mr(t){if(t.fragment!==null){t.update(),Ve(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(yn)}}function Pr(t){const e=[],o=[];_t.forEach(i=>t.indexOf(i)===-1?e.push(i):o.push(i)),o.forEach(i=>i()),_t=e}const Ut=new Set;let it;function Kt(){it={r:0,c:[],p:it}}function en(){it.r||Ve(it.c),it=it.p}function j(t,e){t&&t.i&&(Ut.delete(t),t.i(e))}function Z(t,e,o,i){if(t&&t.o){if(Ut.has(t))return;Ut.add(t),it.c.push(()=>{Ut.delete(t),i&&(o&&t.d(1),i())}),t.o(e)}else i&&i()}function bt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Tn(t,e){Z(t,1,1,()=>{e.delete(t.key)})}function Sn(t,e,o,i,l,a,u,d,h,g,c,y){let p=t.length,_=a.length,b=p;const I={};for(;b--;)I[t[b].key]=b;const v=[],C=new Map,x=new Map,D=[];for(b=_;b--;){const F=y(l,a,b),T=o(F);let k=u.get(T);k?i&&D.push(()=>k.p(F,e)):(k=g(T,F),k.c()),C.set(T,v[b]=k),T in I&&x.set(T,Math.abs(b-I[T]))}const N=new Set,O=new Set;function z(F){j(F,1),F.m(d,c),u.set(F.key,F),c=F.first,_--}for(;p&&_;){const F=v[_-1],T=t[p-1],k=F.key,K=T.key;F===T?(c=F.first,p--,_--):C.has(K)?!u.has(k)||N.has(k)?z(F):O.has(K)?p--:x.get(k)>x.get(K)?(O.add(k),z(F)):(N.add(K),p--):(h(T,u),p--)}for(;p--;){const F=t[p];C.has(F.key)||h(F,u)}for(;_;)z(v[_-1]);return Ve(D),v}function ue(t,e,o){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=o,o(t.$$.ctx[i]))}function ne(t){t&&t.c()}function Y(t,e,o){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,o),yn(()=>{const a=t.$$.on_mount.map(sr).filter(Dt);t.$$.on_destroy?t.$$.on_destroy.push(...a):Ve(a),t.$$.on_mount=[]}),l.forEach(yn)}function Q(t,e){const o=t.$$;o.fragment!==null&&(Pr(o.after_update),Ve(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function Ur(t,e){t.$$.dirty[0]===-1&&(gt.push(t),Lr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(t,e,o,i,l,a,u,d=[-1]){const h=St;Tt(t);const g=t.$$={fragment:null,ctx:[],props:a,update:ze,not_equal:l,bound:Ln(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:Ln(),dirty:d,skip_bound:!1,root:e.target||h.$$.root};u&&u(g.root);let c=!1;if(g.ctx=o?o(t,e.props||{},(y,p,..._)=>{const b=_.length?_[0]:p;return g.ctx&&l(g.ctx[y],g.ctx[y]=b)&&(!g.skip_bound&&g.bound[y]&&g.bound[y](b),c&&Ur(t,y)),p}):[],g.update(),c=!0,Ve(g.before_update),g.fragment=i?i(g.ctx):!1,e.target){if(e.hydrate){const y=Br(e.target);g.fragment&&g.fragment.l(y),y.forEach(Oe)}else g.fragment&&g.fragment.c();e.intro&&j(t.$$.fragment),Y(t,e.target,e.anchor),lr()}Tt(h)}class ct{constructor(){Mt(this,"$$");Mt(this,"$$set")}$destroy(){Q(this,1),this.$destroy=ze}$on(e,o){if(!Dt(o))return ze;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(o),()=>{const l=i.indexOf(o);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!kr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zr);var ar={},tn={};tn.byteLength=Gr;tn.toByteArray=Zr;tn.fromByteArray=Wr;var Fe=[],Re=[],Vr=typeof Uint8Array<"u"?Uint8Array:Array,hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var mt=0,qr=hn.length;mt<qr;++mt)Fe[mt]=hn[mt],Re[hn.charCodeAt(mt)]=mt;Re["-".charCodeAt(0)]=62;Re["_".charCodeAt(0)]=63;function cr(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=t.indexOf("=");o===-1&&(o=e);var i=o===e?0:4-o%4;return[o,i]}function Gr(t){var e=cr(t),o=e[0],i=e[1];return(o+i)*3/4-i}function jr(t,e,o){return(e+o)*3/4-o}function Zr(t){var e,o=cr(t),i=o[0],l=o[1],a=new Vr(jr(t,i,l)),u=0,d=l>0?i-4:i,h;for(h=0;h<d;h+=4)e=Re[t.charCodeAt(h)]<<18|Re[t.charCodeAt(h+1)]<<12|Re[t.charCodeAt(h+2)]<<6|Re[t.charCodeAt(h+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=e&255;return l===2&&(e=Re[t.charCodeAt(h)]<<2|Re[t.charCodeAt(h+1)]>>4,a[u++]=e&255),l===1&&(e=Re[t.charCodeAt(h)]<<10|Re[t.charCodeAt(h+1)]<<4|Re[t.charCodeAt(h+2)]>>2,a[u++]=e>>8&255,a[u++]=e&255),a}function Jr(t){return Fe[t>>18&63]+Fe[t>>12&63]+Fe[t>>6&63]+Fe[t&63]}function Hr(t,e,o){for(var i,l=[],a=e;a<o;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),l.push(Jr(i));return l.join("")}function Wr(t){for(var e,o=t.length,i=o%3,l=[],a=16383,u=0,d=o-i;u<d;u+=a)l.push(Hr(t,u,u+a>d?d:u+a));return i===1?(e=t[o-1],l.push(Fe[e>>2]+Fe[e<<4&63]+"==")):i===2&&(e=(t[o-2]<<8)+t[o-1],l.push(Fe[e>>10]+Fe[e>>4&63]+Fe[e<<2&63]+"=")),l.join("")}var Nn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Nn.read=function(t,e,o,i,l){var a,u,d=l*8-i-1,h=(1<<d)-1,g=h>>1,c=-7,y=o?l-1:0,p=o?-1:1,_=t[e+y];for(y+=p,a=_&(1<<-c)-1,_>>=-c,c+=d;c>0;a=a*256+t[e+y],y+=p,c-=8);for(u=a&(1<<-c)-1,a>>=-c,c+=i;c>0;u=u*256+t[e+y],y+=p,c-=8);if(a===0)a=1-g;else{if(a===h)return u?NaN:(_?-1:1)*(1/0);u=u+Math.pow(2,i),a=a-g}return(_?-1:1)*u*Math.pow(2,a-i)};Nn.write=function(t,e,o,i,l,a){var u,d,h,g=a*8-l-1,c=(1<<g)-1,y=c>>1,p=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=i?0:a-1,b=i?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,u=c):(u=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+y>=1?e+=p/h:e+=p*Math.pow(2,1-y),e*h>=2&&(u++,h/=2),u+y>=c?(d=0,u=c):u+y>=1?(d=(e*h-1)*Math.pow(2,l),u=u+y):(d=e*Math.pow(2,y-1)*Math.pow(2,l),u=0));l>=8;t[o+_]=d&255,_+=b,d/=256,l-=8);for(u=u<<l|d,g+=l;g>0;t[o+_]=u&255,_+=b,u/=256,g-=8);t[o+_-b]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=tn,o=Nn,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;const l=2147483647;t.kMaxLength=l;const{Uint8Array:a,ArrayBuffer:u,SharedArrayBuffer:d}=globalThis;c.TYPED_ARRAY_SUPPORT=h(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const s=new a(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,a.prototype),Object.setPrototypeOf(s,n),s.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function g(s){if(s>l)throw new RangeError('The value "'+s+'" is invalid for option "size"');const n=new a(s);return Object.setPrototypeOf(n,c.prototype),n}function c(s,n,r){if(typeof s=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(s)}return y(s,n,r)}c.poolSize=8192;function y(s,n,r){if(typeof s=="string")return I(s,n);if(u.isView(s))return C(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(Ae(s,u)||s&&Ae(s.buffer,u)||typeof d<"u"&&(Ae(s,d)||s&&Ae(s.buffer,d)))return x(s,n,r);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=s.valueOf&&s.valueOf();if(f!=null&&f!==s)return c.from(f,n,r);const m=D(s);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return c.from(s[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}c.from=function(s,n,r){return y(s,n,r)},Object.setPrototypeOf(c.prototype,a.prototype),Object.setPrototypeOf(c,a);function p(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function _(s,n,r){return p(s),s<=0?g(s):n!==void 0?typeof r=="string"?g(s).fill(n,r):g(s).fill(n):g(s)}c.alloc=function(s,n,r){return _(s,n,r)};function b(s){return p(s),g(s<0?0:N(s)|0)}c.allocUnsafe=function(s){return b(s)},c.allocUnsafeSlow=function(s){return b(s)};function I(s,n){if((typeof n!="string"||n==="")&&(n="utf8"),!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);const r=z(s,n)|0;let f=g(r);const m=f.write(s,n);return m!==r&&(f=f.slice(0,m)),f}function v(s){const n=s.length<0?0:N(s.length)|0,r=g(n);for(let f=0;f<n;f+=1)r[f]=s[f]&255;return r}function C(s){if(Ae(s,a)){const n=new a(s);return x(n.buffer,n.byteOffset,n.byteLength)}return v(s)}function x(s,n,r){if(n<0||s.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');let f;return n===void 0&&r===void 0?f=new a(s):r===void 0?f=new a(s,n):f=new a(s,n,r),Object.setPrototypeOf(f,c.prototype),f}function D(s){if(c.isBuffer(s)){const n=N(s.length)|0,r=g(n);return r.length===0||s.copy(r,0,0,n),r}if(s.length!==void 0)return typeof s.length!="number"||un(s.length)?g(0):v(s);if(s.type==="Buffer"&&Array.isArray(s.data))return v(s.data)}function N(s){if(s>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return s|0}function O(s){return+s!=s&&(s=0),c.alloc(+s)}c.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==c.prototype},c.compare=function(n,r){if(Ae(n,a)&&(n=c.from(n,n.offset,n.byteLength)),Ae(r,a)&&(r=c.from(r,r.offset,r.byteLength)),!c.isBuffer(n)||!c.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===r)return 0;let f=n.length,m=r.length;for(let w=0,E=Math.min(f,m);w<E;++w)if(n[w]!==r[w]){f=n[w],m=r[w];break}return f<m?-1:m<f?1:0},c.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(n,r){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return c.alloc(0);let f;if(r===void 0)for(r=0,f=0;f<n.length;++f)r+=n[f].length;const m=c.allocUnsafe(r);let w=0;for(f=0;f<n.length;++f){let E=n[f];if(Ae(E,a))w+E.length>m.length?(c.isBuffer(E)||(E=c.from(E)),E.copy(m,w)):a.prototype.set.call(m,E,w);else if(c.isBuffer(E))E.copy(m,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=E.length}return m};function z(s,n){if(c.isBuffer(s))return s.length;if(u.isView(s)||Ae(s,u))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);const r=s.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&r===0)return 0;let m=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return dt(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Ot(s).length;default:if(m)return f?-1:dt(s).length;n=(""+n).toLowerCase(),m=!0}}c.byteLength=z;function F(s,n,r){let f=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,n>>>=0,r<=n))return"";for(s||(s="utf8");;)switch(s){case"hex":return Ue(this,n,r);case"utf8":case"utf-8":return V(this,n,r);case"ascii":return be(this,n,r);case"latin1":case"binary":return ke(this,n,r);case"base64":return Pe(this,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,n,r);default:if(f)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),f=!0}}c.prototype._isBuffer=!0;function T(s,n,r){const f=s[n];s[n]=s[r],s[r]=f}c.prototype.swap16=function(){const n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<n;r+=2)T(this,r,r+1);return this},c.prototype.swap32=function(){const n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<n;r+=4)T(this,r,r+3),T(this,r+1,r+2);return this},c.prototype.swap64=function(){const n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<n;r+=8)T(this,r,r+7),T(this,r+1,r+6),T(this,r+2,r+5),T(this,r+3,r+4);return this},c.prototype.toString=function(){const n=this.length;return n===0?"":arguments.length===0?V(this,0,n):F.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(n){if(!c.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:c.compare(this,n)===0},c.prototype.inspect=function(){let n="";const r=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(n+=" ... "),"<Buffer "+n+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(n,r,f,m,w){if(Ae(n,a)&&(n=c.from(n,n.offset,n.byteLength)),!c.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(r===void 0&&(r=0),f===void 0&&(f=n?n.length:0),m===void 0&&(m=0),w===void 0&&(w=this.length),r<0||f>n.length||m<0||w>this.length)throw new RangeError("out of range index");if(m>=w&&r>=f)return 0;if(m>=w)return-1;if(r>=f)return 1;if(r>>>=0,f>>>=0,m>>>=0,w>>>=0,this===n)return 0;let E=w-m,M=f-r;const ee=Math.min(E,M),H=this.slice(m,w),te=n.slice(r,f);for(let J=0;J<ee;++J)if(H[J]!==te[J]){E=H[J],M=te[J];break}return E<M?-1:M<E?1:0};function k(s,n,r,f,m){if(s.length===0)return-1;if(typeof r=="string"?(f=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,un(r)&&(r=m?0:s.length-1),r<0&&(r=s.length+r),r>=s.length){if(m)return-1;r=s.length-1}else if(r<0)if(m)r=0;else return-1;if(typeof n=="string"&&(n=c.from(n,f)),c.isBuffer(n))return n.length===0?-1:K(s,n,r,f,m);if(typeof n=="number")return n=n&255,typeof a.prototype.indexOf=="function"?m?a.prototype.indexOf.call(s,n,r):a.prototype.lastIndexOf.call(s,n,r):K(s,[n],r,f,m);throw new TypeError("val must be string, number or Buffer")}function K(s,n,r,f,m){let w=1,E=s.length,M=n.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(s.length<2||n.length<2)return-1;w=2,E/=2,M/=2,r/=2}function ee(te,J){return w===1?te[J]:te.readUInt16BE(J*w)}let H;if(m){let te=-1;for(H=r;H<E;H++)if(ee(s,H)===ee(n,te===-1?0:H-te)){if(te===-1&&(te=H),H-te+1===M)return te*w}else te!==-1&&(H-=H-te),te=-1}else for(r+M>E&&(r=E-M),H=r;H>=0;H--){let te=!0;for(let J=0;J<M;J++)if(ee(s,H+J)!==ee(n,J)){te=!1;break}if(te)return H}return-1}c.prototype.includes=function(n,r,f){return this.indexOf(n,r,f)!==-1},c.prototype.indexOf=function(n,r,f){return k(this,n,r,f,!0)},c.prototype.lastIndexOf=function(n,r,f){return k(this,n,r,f,!1)};function L(s,n,r,f){r=Number(r)||0;const m=s.length-r;f?(f=Number(f),f>m&&(f=m)):f=m;const w=n.length;f>w/2&&(f=w/2);let E;for(E=0;E<f;++E){const M=parseInt(n.substr(E*2,2),16);if(un(M))return E;s[r+E]=M}return E}function he(s,n,r,f){return et(dt(n,s.length-r),s,r,f)}function S(s,n,r,f){return et(Ft(n),s,r,f)}function P(s,n,r,f){return et(Ot(n),s,r,f)}function _e(s,n,r,f){return et(Lt(n,s.length-r),s,r,f)}c.prototype.write=function(n,r,f,m){if(r===void 0)m="utf8",f=this.length,r=0;else if(f===void 0&&typeof r=="string")m=r,f=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(f)?(f=f>>>0,m===void 0&&(m="utf8")):(m=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const w=this.length-r;if((f===void 0||f>w)&&(f=w),n.length>0&&(f<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let E=!1;for(;;)switch(m){case"hex":return L(this,n,r,f);case"utf8":case"utf-8":return he(this,n,r,f);case"ascii":case"latin1":case"binary":return S(this,n,r,f);case"base64":return P(this,n,r,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,n,r,f);default:if(E)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),E=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pe(s,n,r){return n===0&&r===s.length?e.fromByteArray(s):e.fromByteArray(s.slice(n,r))}function V(s,n,r){r=Math.min(s.length,r);const f=[];let m=n;for(;m<r;){const w=s[m];let E=null,M=w>239?4:w>223?3:w>191?2:1;if(m+M<=r){let ee,H,te,J;switch(M){case 1:w<128&&(E=w);break;case 2:ee=s[m+1],(ee&192)===128&&(J=(w&31)<<6|ee&63,J>127&&(E=J));break;case 3:ee=s[m+1],H=s[m+2],(ee&192)===128&&(H&192)===128&&(J=(w&15)<<12|(ee&63)<<6|H&63,J>2047&&(J<55296||J>57343)&&(E=J));break;case 4:ee=s[m+1],H=s[m+2],te=s[m+3],(ee&192)===128&&(H&192)===128&&(te&192)===128&&(J=(w&15)<<18|(ee&63)<<12|(H&63)<<6|te&63,J>65535&&J<1114112&&(E=J))}}E===null?(E=65533,M=1):E>65535&&(E-=65536,f.push(E>>>10&1023|55296),E=56320|E&1023),f.push(E),m+=M}return ce(f)}const me=4096;function ce(s){const n=s.length;if(n<=me)return String.fromCharCode.apply(String,s);let r="",f=0;for(;f<n;)r+=String.fromCharCode.apply(String,s.slice(f,f+=me));return r}function be(s,n,r){let f="";r=Math.min(s.length,r);for(let m=n;m<r;++m)f+=String.fromCharCode(s[m]&127);return f}function ke(s,n,r){let f="";r=Math.min(s.length,r);for(let m=n;m<r;++m)f+=String.fromCharCode(s[m]);return f}function Ue(s,n,r){const f=s.length;(!n||n<0)&&(n=0),(!r||r<0||r>f)&&(r=f);let m="";for(let w=n;w<r;++w)m+=Sr[s[w]];return m}function ft(s,n,r){const f=s.slice(n,r);let m="";for(let w=0;w<f.length-1;w+=2)m+=String.fromCharCode(f[w]+f[w+1]*256);return m}c.prototype.slice=function(n,r){const f=this.length;n=~~n,r=r===void 0?f:~~r,n<0?(n+=f,n<0&&(n=0)):n>f&&(n=f),r<0?(r+=f,r<0&&(r=0)):r>f&&(r=f),r<n&&(r=n);const m=this.subarray(n,r);return Object.setPrototypeOf(m,c.prototype),m};function W(s,n,r){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+n>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(n,r,f){n=n>>>0,r=r>>>0,f||W(n,r,this.length);let m=this[n],w=1,E=0;for(;++E<r&&(w*=256);)m+=this[n+E]*w;return m},c.prototype.readUintBE=c.prototype.readUIntBE=function(n,r,f){n=n>>>0,r=r>>>0,f||W(n,r,this.length);let m=this[n+--r],w=1;for(;r>0&&(w*=256);)m+=this[n+--r]*w;return m},c.prototype.readUint8=c.prototype.readUInt8=function(n,r){return n=n>>>0,r||W(n,1,this.length),this[n]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(n,r){return n=n>>>0,r||W(n,2,this.length),this[n]|this[n+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(n,r){return n=n>>>0,r||W(n,2,this.length),this[n]<<8|this[n+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(n,r){return n=n>>>0,r||W(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(n,r){return n=n>>>0,r||W(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},c.prototype.readBigUInt64LE=Ze(function(n){n=n>>>0,A(n,"offset");const r=this[n],f=this[n+7];(r===void 0||f===void 0)&&le(n,this.length-8);const m=r+this[++n]*2**8+this[++n]*2**16+this[++n]*2**24,w=this[++n]+this[++n]*2**8+this[++n]*2**16+f*2**24;return BigInt(m)+(BigInt(w)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ze(function(n){n=n>>>0,A(n,"offset");const r=this[n],f=this[n+7];(r===void 0||f===void 0)&&le(n,this.length-8);const m=r*2**24+this[++n]*2**16+this[++n]*2**8+this[++n],w=this[++n]*2**24+this[++n]*2**16+this[++n]*2**8+f;return(BigInt(m)<<BigInt(32))+BigInt(w)}),c.prototype.readIntLE=function(n,r,f){n=n>>>0,r=r>>>0,f||W(n,r,this.length);let m=this[n],w=1,E=0;for(;++E<r&&(w*=256);)m+=this[n+E]*w;return w*=128,m>=w&&(m-=Math.pow(2,8*r)),m},c.prototype.readIntBE=function(n,r,f){n=n>>>0,r=r>>>0,f||W(n,r,this.length);let m=r,w=1,E=this[n+--m];for(;m>0&&(w*=256);)E+=this[n+--m]*w;return w*=128,E>=w&&(E-=Math.pow(2,8*r)),E},c.prototype.readInt8=function(n,r){return n=n>>>0,r||W(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},c.prototype.readInt16LE=function(n,r){n=n>>>0,r||W(n,2,this.length);const f=this[n]|this[n+1]<<8;return f&32768?f|4294901760:f},c.prototype.readInt16BE=function(n,r){n=n>>>0,r||W(n,2,this.length);const f=this[n+1]|this[n]<<8;return f&32768?f|4294901760:f},c.prototype.readInt32LE=function(n,r){return n=n>>>0,r||W(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},c.prototype.readInt32BE=function(n,r){return n=n>>>0,r||W(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},c.prototype.readBigInt64LE=Ze(function(n){n=n>>>0,A(n,"offset");const r=this[n],f=this[n+7];(r===void 0||f===void 0)&&le(n,this.length-8);const m=this[n+4]+this[n+5]*2**8+this[n+6]*2**16+(f<<24);return(BigInt(m)<<BigInt(32))+BigInt(r+this[++n]*2**8+this[++n]*2**16+this[++n]*2**24)}),c.prototype.readBigInt64BE=Ze(function(n){n=n>>>0,A(n,"offset");const r=this[n],f=this[n+7];(r===void 0||f===void 0)&&le(n,this.length-8);const m=(r<<24)+this[++n]*2**16+this[++n]*2**8+this[++n];return(BigInt(m)<<BigInt(32))+BigInt(this[++n]*2**24+this[++n]*2**16+this[++n]*2**8+f)}),c.prototype.readFloatLE=function(n,r){return n=n>>>0,r||W(n,4,this.length),o.read(this,n,!0,23,4)},c.prototype.readFloatBE=function(n,r){return n=n>>>0,r||W(n,4,this.length),o.read(this,n,!1,23,4)},c.prototype.readDoubleLE=function(n,r){return n=n>>>0,r||W(n,8,this.length),o.read(this,n,!0,52,8)},c.prototype.readDoubleBE=function(n,r){return n=n>>>0,r||W(n,8,this.length),o.read(this,n,!1,52,8)};function se(s,n,r,f,m,w){if(!c.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>m||n<w)throw new RangeError('"value" argument is out of bounds');if(r+f>s.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(n,r,f,m){if(n=+n,r=r>>>0,f=f>>>0,!m){const M=Math.pow(2,8*f)-1;se(this,n,r,f,M,0)}let w=1,E=0;for(this[r]=n&255;++E<f&&(w*=256);)this[r+E]=n/w&255;return r+f},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(n,r,f,m){if(n=+n,r=r>>>0,f=f>>>0,!m){const M=Math.pow(2,8*f)-1;se(this,n,r,f,M,0)}let w=f-1,E=1;for(this[r+w]=n&255;--w>=0&&(E*=256);)this[r+w]=n/E&255;return r+f},c.prototype.writeUint8=c.prototype.writeUInt8=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,1,255,0),this[r]=n&255,r+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,2,65535,0),this[r]=n&255,this[r+1]=n>>>8,r+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,2,65535,0),this[r]=n>>>8,this[r+1]=n&255,r+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,4,4294967295,0),this[r+3]=n>>>24,this[r+2]=n>>>16,this[r+1]=n>>>8,this[r]=n&255,r+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,4,4294967295,0),this[r]=n>>>24,this[r+1]=n>>>16,this[r+2]=n>>>8,this[r+3]=n&255,r+4};function Qe(s,n,r,f,m){je(n,f,m,s,r,7);let w=Number(n&BigInt(4294967295));s[r++]=w,w=w>>8,s[r++]=w,w=w>>8,s[r++]=w,w=w>>8,s[r++]=w;let E=Number(n>>BigInt(32)&BigInt(4294967295));return s[r++]=E,E=E>>8,s[r++]=E,E=E>>8,s[r++]=E,E=E>>8,s[r++]=E,r}function Xe(s,n,r,f,m){je(n,f,m,s,r,7);let w=Number(n&BigInt(4294967295));s[r+7]=w,w=w>>8,s[r+6]=w,w=w>>8,s[r+5]=w,w=w>>8,s[r+4]=w;let E=Number(n>>BigInt(32)&BigInt(4294967295));return s[r+3]=E,E=E>>8,s[r+2]=E,E=E>>8,s[r+1]=E,E=E>>8,s[r]=E,r+8}c.prototype.writeBigUInt64LE=Ze(function(n,r=0){return Qe(this,n,r,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ze(function(n,r=0){return Xe(this,n,r,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(n,r,f,m){if(n=+n,r=r>>>0,!m){const ee=Math.pow(2,8*f-1);se(this,n,r,f,ee-1,-ee)}let w=0,E=1,M=0;for(this[r]=n&255;++w<f&&(E*=256);)n<0&&M===0&&this[r+w-1]!==0&&(M=1),this[r+w]=(n/E>>0)-M&255;return r+f},c.prototype.writeIntBE=function(n,r,f,m){if(n=+n,r=r>>>0,!m){const ee=Math.pow(2,8*f-1);se(this,n,r,f,ee-1,-ee)}let w=f-1,E=1,M=0;for(this[r+w]=n&255;--w>=0&&(E*=256);)n<0&&M===0&&this[r+w+1]!==0&&(M=1),this[r+w]=(n/E>>0)-M&255;return r+f},c.prototype.writeInt8=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,1,127,-128),n<0&&(n=255+n+1),this[r]=n&255,r+1},c.prototype.writeInt16LE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,2,32767,-32768),this[r]=n&255,this[r+1]=n>>>8,r+2},c.prototype.writeInt16BE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,2,32767,-32768),this[r]=n>>>8,this[r+1]=n&255,r+2},c.prototype.writeInt32LE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,4,2147483647,-2147483648),this[r]=n&255,this[r+1]=n>>>8,this[r+2]=n>>>16,this[r+3]=n>>>24,r+4},c.prototype.writeInt32BE=function(n,r,f){return n=+n,r=r>>>0,f||se(this,n,r,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[r]=n>>>24,this[r+1]=n>>>16,this[r+2]=n>>>8,this[r+3]=n&255,r+4},c.prototype.writeBigInt64LE=Ze(function(n,r=0){return Qe(this,n,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ze(function(n,r=0){return Xe(this,n,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ke(s,n,r,f,m,w){if(r+f>s.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $(s,n,r,f,m){return n=+n,r=r>>>0,m||Ke(s,n,r,4),o.write(s,n,r,f,23,4),r+4}c.prototype.writeFloatLE=function(n,r,f){return $(this,n,r,!0,f)},c.prototype.writeFloatBE=function(n,r,f){return $(this,n,r,!1,f)};function Ie(s,n,r,f,m){return n=+n,r=r>>>0,m||Ke(s,n,r,8),o.write(s,n,r,f,52,8),r+8}c.prototype.writeDoubleLE=function(n,r,f){return Ie(this,n,r,!0,f)},c.prototype.writeDoubleBE=function(n,r,f){return Ie(this,n,r,!1,f)},c.prototype.copy=function(n,r,f,m){if(!c.isBuffer(n))throw new TypeError("argument should be a Buffer");if(f||(f=0),!m&&m!==0&&(m=this.length),r>=n.length&&(r=n.length),r||(r=0),m>0&&m<f&&(m=f),m===f||n.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),n.length-r<m-f&&(m=n.length-r+f);const w=m-f;return this===n&&typeof a.prototype.copyWithin=="function"?this.copyWithin(r,f,m):a.prototype.set.call(n,this.subarray(f,m),r),w},c.prototype.fill=function(n,r,f,m){if(typeof n=="string"){if(typeof r=="string"?(m=r,r=0,f=this.length):typeof f=="string"&&(m=f,f=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!c.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(n.length===1){const E=n.charCodeAt(0);(m==="utf8"&&E<128||m==="latin1")&&(n=E)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(r<0||this.length<r||this.length<f)throw new RangeError("Out of range index");if(f<=r)return this;r=r>>>0,f=f===void 0?this.length:f>>>0,n||(n=0);let w;if(typeof n=="number")for(w=r;w<f;++w)this[w]=n;else{const E=c.isBuffer(n)?n:c.from(n,m),M=E.length;if(M===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(w=0;w<f-r;++w)this[w+r]=E[w%M]}return this};const Ne={};function qe(s,n,r){Ne[s]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:n.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}qe("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qe("ERR_INVALID_ARG_TYPE",function(s,n){return`The "${s}" argument must be of type number. Received type ${typeof n}`},TypeError),qe("ERR_OUT_OF_RANGE",function(s,n,r){let f=`The value of "${s}" is out of range.`,m=r;return Number.isInteger(r)&&Math.abs(r)>2**32?m=Ge(String(r)):typeof r=="bigint"&&(m=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(m=Ge(m)),m+="n"),f+=` It must be ${n}. Received ${m}`,f},RangeError);function Ge(s){let n="",r=s.length;const f=s[0]==="-"?1:0;for(;r>=f+4;r-=3)n=`_${s.slice(r-3,r)}${n}`;return`${s.slice(0,r)}${n}`}function ut(s,n,r){A(n,"offset"),(s[n]===void 0||s[n+r]===void 0)&&le(n,s.length-(r+1))}function je(s,n,r,f,m,w){if(s>r||s<n){const E=typeof n=="bigint"?"n":"";let M;throw w>3?n===0||n===BigInt(0)?M=`>= 0${E} and < 2${E} ** ${(w+1)*8}${E}`:M=`>= -(2${E} ** ${(w+1)*8-1}${E}) and < 2 ** ${(w+1)*8-1}${E}`:M=`>= ${n}${E} and <= ${r}${E}`,new Ne.ERR_OUT_OF_RANGE("value",M,s)}ut(f,m,w)}function A(s,n){if(typeof s!="number")throw new Ne.ERR_INVALID_ARG_TYPE(n,"number",s)}function le(s,n,r){throw Math.floor(s)!==s?(A(s,r),new Ne.ERR_OUT_OF_RANGE(r||"offset","an integer",s)):n<0?new Ne.ERR_BUFFER_OUT_OF_BOUNDS:new Ne.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${n}`,s)}const Ct=/[^+/0-9A-Za-z-_]/g;function vt(s){if(s=s.split("=")[0],s=s.trim().replace(Ct,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function dt(s,n){n=n||1/0;let r;const f=s.length;let m=null;const w=[];for(let E=0;E<f;++E){if(r=s.charCodeAt(E),r>55295&&r<57344){if(!m){if(r>56319){(n-=3)>-1&&w.push(239,191,189);continue}else if(E+1===f){(n-=3)>-1&&w.push(239,191,189);continue}m=r;continue}if(r<56320){(n-=3)>-1&&w.push(239,191,189),m=r;continue}r=(m-55296<<10|r-56320)+65536}else m&&(n-=3)>-1&&w.push(239,191,189);if(m=null,r<128){if((n-=1)<0)break;w.push(r)}else if(r<2048){if((n-=2)<0)break;w.push(r>>6|192,r&63|128)}else if(r<65536){if((n-=3)<0)break;w.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((n-=4)<0)break;w.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return w}function Ft(s){const n=[];for(let r=0;r<s.length;++r)n.push(s.charCodeAt(r)&255);return n}function Lt(s,n){let r,f,m;const w=[];for(let E=0;E<s.length&&!((n-=2)<0);++E)r=s.charCodeAt(E),f=r>>8,m=r%256,w.push(m),w.push(f);return w}function Ot(s){return e.toByteArray(vt(s))}function et(s,n,r,f){let m;for(m=0;m<f&&!(m+r>=n.length||m>=s.length);++m)n[m+r]=s[m];return m}function Ae(s,n){return s instanceof n||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===n.name}function un(s){return s!==s}const Sr=function(){const s="0123456789abcdef",n=new Array(256);for(let r=0;r<16;++r){const f=r*16;for(let m=0;m<16;++m)n[f+m]=s[r]+s[m]}return n}();function Ze(s){return typeof BigInt>"u"?Nr:s}function Nr(){throw new Error("BigInt not supported")}})(ar);const B=ar.Buffer;class q extends Error{constructor(e,o,i,...l){Array.isArray(o)&&(o=o.join(" ").trim()),super(o),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,q),this.code=e;for(const a of l)for(const u in a){const d=a[u];this[u]=B.isBuffer(d)?d.toString(i.encoding):d==null?d:JSON.parse(JSON.stringify(d))}}}const Yr=function(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)},fr=function(t){const e=[];for(let o=0,i=t.length;o<i;o++){const l=t[o];if(l==null||l===!1)e[o]={disabled:!0};else if(typeof l=="string")e[o]={name:l};else if(Yr(l)){if(typeof l.name!="string")throw new q("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${o}`,"when column is an object literal"]);e[o]=l}else throw new q("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(l)} at position ${o}`])}return e};class Pn{constructor(e=100){this.size=e,this.length=0,this.buf=B.allocUnsafe(e)}prepend(e){if(B.isBuffer(e)){const o=this.length+e.length;if(o>=this.size&&(this.resize(),o>=this.size))throw Error("INVALID_BUFFER_STATE");const i=this.buf;this.buf=B.allocUnsafe(this.size),e.copy(this.buf,0),i.copy(this.buf,e.length),this.length+=e.length}else{const o=this.length++;o===this.size&&this.resize();const i=this.clone();this.buf[0]=e,i.copy(this.buf,1,0,o)}}append(e){const o=this.length++;o===this.size&&this.resize(),this.buf[o]=e}clone(){return B.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const o=B.allocUnsafe(this.size);this.buf.copy(o,0,0,e),this.buf=o}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Qr=12,Xr=13,Kr=10,ei=32,ti=9,ni=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:t.from_line===1,escaping:!1,escapeIsQuote:B.isBuffer(t.escape)&&B.isBuffer(t.quote)&&B.compare(t.escape,t.quote)===0,expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new Pn(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(t.comment!==null?t.comment.length:0,...t.delimiter.map(e=>e.length),t.quote!==null?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new Pn(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:t.record_delimiter.length===0?0:Math.max(...t.record_delimiter.map(e=>e.length)),trimChars:[B.from(" ",t.encoding)[0],B.from("	",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[B.from(B.from([Xr],"utf8").toString(),t.encoding),B.from(B.from([Kr],"utf8").toString(),t.encoding),B.from(B.from([Qr],"utf8").toString(),t.encoding),B.from(B.from([ei],"utf8").toString(),t.encoding),B.from(B.from([ti],"utf8").toString(),t.encoding)]}},ri=function(t){return t.replace(/([A-Z])/g,function(e,o){return"_"+o.toLowerCase()})},Un=function(t){const e={};for(const i in t)e[ri(i)]=t[i];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new q("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new q("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new q("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(i){const l=Date.parse(i);return isNaN(l)?i:new Date(l)};else if(typeof e.cast_date!="function")throw new q("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=fr(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new q("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new q("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new q("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=B.from(e.comment,e.encoding)),!B.isBuffer(e.comment))throw new q("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new q("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const o=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new q("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${o}`],e);if(e.delimiter=e.delimiter.map(function(i){if(i==null||i===!1)return B.from(",",e.encoding);if(typeof i=="string"&&(i=B.from(i,e.encoding)),!B.isBuffer(i)||i.length===0)throw new q("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${o}`],e);return i}),e.escape===void 0||e.escape===!0?e.escape=B.from('"',e.encoding):typeof e.escape=="string"?e.escape=B.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!B.isBuffer(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(t.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(t.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(t.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new q("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new q("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(B.isBuffer(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new q("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=B.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=B.from(e.quote,e.encoding)),!B.isBuffer(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||B.isBuffer(e.record_delimiter)){if(e.record_delimiter.length===0)throw new q("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new q("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(i,l){if(typeof i!="string"&&!B.isBuffer(i))throw new q("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${l},`,`got ${JSON.stringify(i)}`],e);if(i.length===0)throw new q("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${l},`,`got ${JSON.stringify(i)}`],e);return typeof i=="string"&&(i=B.from(i,e.encoding)),i}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&t.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&t.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(t.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(t.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(t.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(t.to_line)}`);return e},zn=function(t){return t.every(e=>e==null||e.toString&&e.toString().trim()==="")},ii=13,oi=10,pt={utf8:B.from([239,187,191]),utf16le:B.from([255,254])},si=function(t={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},o=Un(t);return{info:e,original_options:t,options:o,state:ni(o),__needMoreData:function(i,l,a){if(a)return!1;const{encoding:u,escape:d,quote:h}=this.options,{quoting:g,needMoreDataSize:c,recordDelimiterMaxLength:y}=this.state,p=l-i-1,_=Math.max(c,y===0?B.from(`\r
`,u).length:y,g?(d===null?0:d.length)+h.length:0,g?h.length+y:0);return p<_},parse:function(i,l,a,u){const{bom:d,comment_no_infix:h,encoding:g,from_line:c,ltrim:y,max_record_size:p,raw:_,relax_quotes:b,rtrim:I,skip_empty_lines:v,to:C,to_line:x}=this.options;let{comment:D,escape:N,quote:O,record_delimiter:z}=this.options;const{bomSkipped:F,previousBuf:T,rawBuffer:k,escapeIsQuote:K}=this.state;let L;if(T===void 0)if(i===void 0){u();return}else L=i;else T!==void 0&&i===void 0?L=T:L=B.concat([T,i]);if(F===!1)if(d===!1)this.state.bomSkipped=!0;else if(L.length<3){if(l===!1){this.state.previousBuf=L;return}}else{for(const P in pt)if(pt[P].compare(L,0,pt[P].length)===0){const _e=pt[P].length;this.state.bufBytesStart+=_e,L=L.slice(_e),this.options=Un({...this.original_options,encoding:P}),{comment:D,escape:N,quote:O}=this.options;break}this.state.bomSkipped=!0}const he=L.length;let S;for(S=0;S<he&&!this.__needMoreData(S,he,l);S++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),x!==-1&&this.info.lines>x){this.state.stop=!0,u();return}this.state.quoting===!1&&z.length===0&&this.__autoDiscoverRecordDelimiter(L,S)&&(z=this.options.record_delimiter);const P=L[S];if(_===!0&&k.append(P),(P===ii||P===oi)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(N!==null&&this.state.quoting===!0&&this.__isEscape(L,S,P)&&S+N.length<he)if(K){if(this.__isQuote(L,S+N.length)){this.state.escaping=!0,S+=N.length-1;continue}}else{this.state.escaping=!0,S+=N.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(L,S))if(this.state.quoting===!0){const V=L[S+O.length],me=I&&this.__isCharTrimable(L,S+O.length),ce=D!==null&&this.__compareBytes(D,L,S+O.length,V),be=this.__isDelimiter(L,S+O.length,V),ke=z.length===0?this.__autoDiscoverRecordDelimiter(L,S+O.length):this.__isRecordDelimiter(V,L,S+O.length);if(N!==null&&this.__isEscape(L,S,P)&&this.__isQuote(L,S+N.length))S+=N.length-1;else if(!V||be||ke||ce||me){this.state.quoting=!1,this.state.wasQuoting=!0,S+=O.length-1;continue}else if(b===!1){const Ue=this.__error(new q("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(V)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(Ue!==void 0)return Ue}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(O),S+=O.length-1}else if(this.state.field.length!==0){if(b===!1){const V=this.__infoField(),me=Object.keys(pt).map(be=>pt[be].equals(this.state.field.toString())?be:!1).filter(Boolean)[0],ce=this.__error(new q("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(V.column)} at line ${V.lines}, value is ${JSON.stringify(this.state.field.toString(g))}`,me?`(${me} bom)`:void 0],this.options,V,{field:this.state.field}));if(ce!==void 0)return ce}}else{this.state.quoting=!0,S+=O.length-1;continue}if(this.state.quoting===!1){const V=this.__isRecordDelimiter(P,L,S);if(V!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=c){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),S+=V-1;continue}if(v===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,S+=V-1;continue}this.info.bytes=this.state.bufBytesStart+S;const be=this.__onField();if(be!==void 0)return be;this.info.bytes=this.state.bufBytesStart+S+V;const ke=this.__onRecord(a);if(ke!==void 0)return ke;if(C!==-1&&this.info.records>=C){this.state.stop=!0,u();return}}this.state.commenting=!1,S+=V-1;continue}if(this.state.commenting)continue;if(D!==null&&(h===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(D,L,S,P)!==0){this.state.commenting=!0;continue}const me=this.__isDelimiter(L,S,P);if(me!==0){this.info.bytes=this.state.bufBytesStart+S;const ce=this.__onField();if(ce!==void 0)return ce;S+=me-1;continue}}}if(this.state.commenting===!1&&p!==0&&this.state.record_length+this.state.field.length>p)return this.__error(new q("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${p}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const _e=y===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(L,S),Pe=I===!1||this.state.wasQuoting===!1;if(_e===!0&&Pe===!0)this.state.field.append(P);else{if(I===!0&&!this.__isCharTrimable(L,S))return this.__error(new q("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));_e===!1&&(S+=this.__isCharTrimable(L,S)-1);continue}}if(l===!0)if(this.state.quoting===!0){const P=this.__error(new q("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(P!==void 0)return P}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+S;const P=this.__onField();if(P!==void 0)return P;const _e=this.__onRecord(a);if(_e!==void 0)return _e}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=S,this.state.previousBuf=L.slice(S);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(i){const{columns:l,group_columns_by_name:a,encoding:u,info:d,from:h,relax_column_count:g,relax_column_count_less:c,relax_column_count_more:y,raw:p,skip_records_with_empty_values:_}=this.options,{enabled:b,record:I}=this.state;if(b===!1)return this.__resetRecord();const v=I.length;if(l===!0){if(_===!0&&zn(I)){this.__resetRecord();return}return this.__firstLineToColumns(I)}if(l===!1&&this.info.records===0&&(this.state.expectedRecordLength=v),v!==this.state.expectedRecordLength){const C=l===!1?new q("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${v} on line ${this.info.lines}`],this.options,this.__infoField(),{record:I}):new q("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${l.length},`,`got ${v} on line ${this.info.lines}`],this.options,this.__infoField(),{record:I});if(g===!0||c===!0&&v<this.state.expectedRecordLength||y===!0&&v>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=C;else{const x=this.__error(C);if(x)return x}}if(_===!0&&zn(I)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,h===1||this.info.records>=h){const{objname:C}=this.options;if(l!==!1){const x={};for(let D=0,N=I.length;D<N;D++)l[D]===void 0||l[D].disabled||(a===!0&&x[l[D].name]!==void 0?Array.isArray(x[l[D].name])?x[l[D].name]=x[l[D].name].concat(I[D]):x[l[D].name]=[x[l[D].name],I[D]]:x[l[D].name]=I[D]);if(p===!0||d===!0){const D=Object.assign({record:x},p===!0?{raw:this.state.rawBuffer.toString(u)}:{},d===!0?{info:this.__infoRecord()}:{}),N=this.__push(C===void 0?D:[x[C],D],i);if(N)return N}else{const D=this.__push(C===void 0?x:[x[C],x],i);if(D)return D}}else if(p===!0||d===!0){const x=Object.assign({record:I},p===!0?{raw:this.state.rawBuffer.toString(u)}:{},d===!0?{info:this.__infoRecord()}:{}),D=this.__push(C===void 0?x:[I[C],x],i);if(D)return D}else{const x=this.__push(C===void 0?I:[I[C],I],i);if(x)return x}}this.__resetRecord()},__firstLineToColumns:function(i){const{firstLineToHeaders:l}=this.state;try{const a=l===void 0?i:l.call(null,i);if(!Array.isArray(a))return this.__error(new q("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(a)}`],this.options,this.__infoField(),{headers:a}));const u=fr(a);this.state.expectedRecordLength=u.length,this.options.columns=u,this.__resetRecord();return}catch(a){return a}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:i,encoding:l,rtrim:a,max_record_size:u}=this.options,{enabled:d,wasQuoting:h}=this.state;if(d===!1)return this.__resetField();let g=this.state.field.toString(l);if(a===!0&&h===!1&&(g=g.trimRight()),i===!0){const[c,y]=this.__cast(g);if(c!==void 0)return c;g=y}this.state.record.push(g),u!==0&&typeof g=="string"&&(this.state.record_length+=g.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(i,l){const{on_record:a}=this.options;if(a!==void 0){const u=this.__infoRecord();try{i=a.call(null,i,u)}catch(d){return d}if(i==null)return}l(i)},__cast:function(i){const{columns:l,relax_column_count:a}=this.options;if(Array.isArray(l)===!0&&a&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const d=this.__infoField();return[void 0,this.state.castField.call(null,i,d)]}catch(d){return[d]}if(this.__isFloat(i))return[void 0,parseFloat(i)];if(this.options.cast_date!==!1){const d=this.__infoField();return[void 0,this.options.cast_date.call(null,i,d)]}return[void 0,i]},__isCharTrimable:function(i,l){return((u,d)=>{const{timchars:h}=this.state;e:for(let g=0;g<h.length;g++){const c=h[g];for(let y=0;y<c.length;y++)if(c[y]!==u[d+y])continue e;return c.length}return 0})(i,l)},__isFloat:function(i){return i-parseFloat(i)+1>=0},__compareBytes:function(i,l,a,u){if(i[0]!==u)return 0;const d=i.length;for(let h=1;h<d;h++)if(i[h]!==l[a+h])return 0;return d},__isDelimiter:function(i,l,a){const{delimiter:u,ignore_last_delimiters:d}=this.options;if(d===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(d!==!1&&typeof d=="number"&&this.state.record.length===d-1)return 0;e:for(let h=0;h<u.length;h++){const g=u[h];if(g[0]===a){for(let c=1;c<g.length;c++)if(g[c]!==i[l+c])continue e;return g.length}}return 0},__isRecordDelimiter:function(i,l,a){const{record_delimiter:u}=this.options,d=u.length;e:for(let h=0;h<d;h++){const g=u[h],c=g.length;if(g[0]===i){for(let y=1;y<c;y++)if(g[y]!==l[a+y])continue e;return g.length}}return 0},__isEscape:function(i,l,a){const{escape:u}=this.options;if(u===null)return!1;const d=u.length;if(u[0]===a){for(let h=0;h<d;h++)if(u[h]!==i[l+h])return!1;return!0}return!1},__isQuote:function(i,l){const{quote:a}=this.options;if(a===null)return!1;const u=a.length;for(let d=0;d<u;d++)if(a[d]!==i[l+d])return!1;return!0},__autoDiscoverRecordDelimiter:function(i,l){const{encoding:a}=this.options,u=[B.from(`\r
`,a),B.from(`
`,a),B.from("\r",a)];e:for(let d=0;d<u.length;d++){const h=u[d].length;for(let g=0;g<h;g++)if(u[d][g]!==i[l+g])continue e;return this.options.record_delimiter.push(u[d]),this.state.recordDelimiterMaxLength=u[d].length,u[d].length}return 0},__error:function(i){const{encoding:l,raw:a,skip_records_with_error:u}=this.options,d=typeof i=="string"?new Error(i):i;if(u){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(d,a?this.state.rawBuffer.toString(l):void 0);return}else return d},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:i,raw:l,encoding:a}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:i===!0,index:this.state.record.length,raw:l?this.state.rawBuffer.toString(a):void 0}},__infoField:function(){const{columns:i}=this.options,l=Array.isArray(i);return{...this.__infoRecord(),column:l===!0?i.length>this.state.record.length?i[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},li=function(t,e={}){typeof t=="string"&&(t=B.from(t));const o=e&&e.objname?{}:[],i=si(e),l=h=>{i.options.objname===void 0?o.push(h):o[h[0]]=h[1]},a=()=>{},u=i.parse(t,!1,l,a);if(u!==void 0)throw u;const d=i.parse(void 0,!0,l,a);if(d!==void 0)throw d;return o},ai="/project-delta-mvp/dist/assets/atnia_set1-6ec0853c.csv",ci=2,fi=6,ui=ci*fi;class di{constructor(){Mt(this,"id",Math.random())}}class hi extends di{constructor(e,o,i,l,a,u,d,h,g,c){super(),this.name=e,this.cost=o,this.source=i,this.type=l,this.subtype=a,this.speed=u,this.offense=d,this.defense=h,this.rulesText=g,this.flavorText=c}}const mn=["Name","Energy Cost","Source","Type","Subtype","Speed","Offense","Defense","RulesText","FlavorText","image","CommentsTags","Comments","RelatedCards","TagsReal","Formats","Set"];async function mi(){let t=await(await fetch(ai)).text(),e=li(t);e=e.filter(function(o){return o.length>0&&o[0].length>0&&o[0]!="BEGIN_CARDS"&&!o[0].startsWith("-")});for(let o=0;o<Math.min(e[0].length,mn.length);++o)if(e[0][o]!==mn[o])throw`cards header did not match! expected ${mn} but got ${e[0]}`;return e.slice(1).map(function(o){return new hi(o[0],parseInt(o[1]),o[2],o[3],o[4],parseInt(o[5]),parseInt(o[6]),parseInt(o[7]),o[8],o[9])})}const pi="finalize",gi="consider";function It(t,e,o){t.dispatchEvent(new CustomEvent(pi,{detail:{items:e,info:o}}))}function Ye(t,e,o){t.dispatchEvent(new CustomEvent(gi,{detail:{items:e,info:o}}))}const nn="draggedEntered",kt="draggedLeft",rn="draggedOverIndex",Rn="draggedLeftDocument",jt={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function _i(t,e,o){t.dispatchEvent(new CustomEvent(nn,{detail:{indexObj:e,draggedEl:o}}))}function yi(t,e,o){t.dispatchEvent(new CustomEvent(kt,{detail:{draggedEl:e,type:jt.LEFT_FOR_ANOTHER,theOtherDz:o}}))}function wi(t,e){t.dispatchEvent(new CustomEvent(kt,{detail:{draggedEl:e,type:jt.OUTSIDE_OF_ANY}}))}function Ei(t,e,o){t.dispatchEvent(new CustomEvent(rn,{detail:{indexObj:e,draggedEl:o}}))}function bi(t){window.dispatchEvent(new CustomEvent(Rn,{detail:{draggedEl:t}}))}const Ee={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:nn,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:rn,DRAGGED_LEFT:kt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},De={POINTER:"pointer",KEYBOARD:"keyboard"},on="isDndShadowItem",$n="data-is-dnd-shadow-item-internal",Ii="data-is-dnd-shadow-item-hint",xi="id:dnd-shadow-placeholder-0000",Di="dnd-action-dragged-el";let de="id",wn=0;function ur(){wn++}function dr(){if(wn===0)throw new Error("Bug! trying to decrement when there are no dropzones");wn--}const kn=typeof window>"u";function En(t){let e;const o=t.getBoundingClientRect(),i=getComputedStyle(t),l=i.transform;if(l){let a,u,d,h;if(l.startsWith("matrix3d("))e=l.slice(9,-1).split(/, /),a=+e[0],u=+e[5],d=+e[12],h=+e[13];else if(l.startsWith("matrix("))e=l.slice(7,-1).split(/, /),a=+e[0],u=+e[3],d=+e[4],h=+e[5];else return o;const g=i.transformOrigin,c=o.x-d-(1-a)*parseFloat(g),y=o.y-h-(1-u)*parseFloat(g.slice(g.indexOf(" ")+1)),p=a?o.width/a:t.offsetWidth,_=u?o.height/u:t.offsetHeight;return{x:c,y,width:p,height:_,top:y,right:c+p,bottom:y+_,left:c}}else return o}function hr(t){const e=En(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function mr(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function pr(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function Oi(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sn(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Nt(t){return pr(mr(t))}function Vn(t,e){const o=Nt(t),i=hr(e);return sn(o,i)}function Ai(t,e){const o=Nt(t),i=Nt(e);return Oi(o,i)}function Ti(t){const e=mr(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}let yt;function Bn(){yt=new Map}Bn();function Si(t){const e=Array.from(t.children).findIndex(o=>o.getAttribute($n));if(e>=0)return yt.has(t)||yt.set(t,new Map),yt.get(t).set(e,hr(t.children[e])),e}function Ni(t,e){if(!Vn(t,e))return null;const o=e.children;if(o.length===0)return{index:0,isProximityBased:!0};const i=Si(e);for(let u=0;u<o.length;u++)if(Vn(t,o[u])){const d=yt.has(e)&&yt.get(e).get(u);return d&&!sn(Nt(t),d)?{index:i,isProximityBased:!1}:{index:u,isProximityBased:!1}}let l=Number.MAX_VALUE,a;for(let u=0;u<o.length;u++){const d=Ai(t,o[u]);d<l&&(l=d,a=u)}return{index:a,isProximityBased:!0}}function Pt(t){return JSON.stringify(t,null,2)}function Zt(t){if(!t)throw new Error("cannot get depth of a falsy node");return gr(t,0)}function gr(t,e=0){return t.parentElement?gr(t.parentElement,e+1):e-1}function Ri(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const o in t)if(!{}.hasOwnProperty.call(e,o)||e[o]!==t[o])return!1;return!0}function $i(t,e){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}const ki=200,qn=10;let bn;function Bi(t,e,o=ki,i){let l,a,u=!1,d;const h=Array.from(e).sort((c,y)=>Zt(y)-Zt(c));function g(){const c=Nt(t),y=i.multiScrollIfNeeded();if(!y&&d&&Math.abs(d.x-c.x)<qn&&Math.abs(d.y-c.y)<qn){bn=window.setTimeout(g,o);return}if(Ti(t)){bi(t);return}d=c;let p=!1;for(const _ of h){y&&Bn();const b=Ni(t,_);if(b===null)continue;const{index:I}=b;p=!0,_!==l?(l&&yi(l,t,_),_i(_,b,t),l=_):I!==a&&(Ei(_,b,t),a=I);break}!p&&u&&l?(wi(l,t),l=void 0,a=void 0,u=!1):u=!0,bn=window.setTimeout(g,o)}g()}function Ci(){clearTimeout(bn),Bn()}const At=30;function vi(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function o(a){const{directionObj:u,stepPx:d}=t;u&&(a.scrollBy(u.x*d,u.y*d),window.requestAnimationFrame(()=>o(a)))}function i(a){return At-a}function l(a,u){if(!u)return!1;const d=Fi(a,u),h=!!t.directionObj;if(d===null)return h&&e(),!1;let[g,c]=[!1,!1];return u.scrollHeight>u.clientHeight&&(d.bottom<At?(g=!0,t.directionObj={x:0,y:1},t.stepPx=i(d.bottom)):d.top<At&&(g=!0,t.directionObj={x:0,y:-1},t.stepPx=i(d.top)),!h&&g)||u.scrollWidth>u.clientWidth&&(d.right<At?(c=!0,t.directionObj={x:1,y:0},t.stepPx=i(d.right)):d.left<At&&(c=!0,t.directionObj={x:-1,y:0},t.stepPx=i(d.left)),!h&&c)?(o(u),!0):(e(),!1)}return{scrollIfNeeded:l,resetScrolling:e}}function Fi(t,e){const o=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();return sn(t,o)?{top:t.y-o.top,bottom:o.bottom-t.y,left:t.x-o.left,right:o.right-t.x}:null}function Li(t=[],e){const o=Pi(t),i=Array.from(o).sort((d,h)=>Zt(h)-Zt(d)),{scrollIfNeeded:l,resetScrolling:a}=vi();function u(){const d=e();if(!d||!i)return!1;const h=i.filter(g=>sn(d,g.getBoundingClientRect())||g===document.scrollingElement);for(let g=0;g<h.length;g++)if(l(d,h[g]))return!0;return!1}return{multiScrollIfNeeded:o.size>0?u:()=>!1,destroy:()=>a()}}function Mi(t){if(!t)return[];const e=[];let o=t;for(;o;){const{overflow:i}=window.getComputedStyle(o);i.split(" ").some(l=>l.includes("auto")||l.includes("scroll"))&&e.push(o),o=o.parentElement}return e}function Pi(t){const e=new Set;for(let o of t)Mi(o).forEach(i=>e.add(i));return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement),e}function Ui(t){const e=t.cloneNode(!0),o=[],i=t.tagName==="SELECT",l=i?[t]:[...t.querySelectorAll("select")];for(const d of l)o.push(d.value);if(l.length>0){const d=i?[e]:[...e.querySelectorAll("select")];for(let h=0;h<d.length;h++){const g=d[h],c=o[h],y=g.querySelector(`option[value="${c}"`);y&&y.setAttribute("selected",!0)}}const a=t.tagName==="CANVAS",u=a?[t]:[...t.querySelectorAll("canvas")];if(u.length>0){const d=a?[e]:[...e.querySelectorAll("canvas")];for(let h=0;h<d.length;h++){const g=u[h],c=d[h];c.width=g.width,c.height=g.height,g.width>0&&g.height>0&&c.getContext("2d").drawImage(g,0,0)}}return e}const Rt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),zi={[Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT]:!1};function _r(t){if(!Rt[t])throw new Error(`Can't get non existing feature flag ${t}! Supported flags: ${Object.keys(Rt)}`);return zi[t]}const Vi=.2;function tt(t){return`${t} ${Vi}s ease`}function qi(t,e){const o=t.getBoundingClientRect(),i=Ui(t);yr(t,i),i.id=Di,i.style.position="fixed";let l=o.top,a=o.left;if(i.style.top=`${l}px`,i.style.left=`${a}px`,e){const u=pr(o);l-=u.y-e.y,a-=u.x-e.x,window.setTimeout(()=>{i.style.top=`${l}px`,i.style.left=`${a}px`},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height=`${o.height}px`,i.style.width=`${o.width}px`,i.style.transition=`${tt("top")}, ${tt("left")}, ${tt("background-color")}, ${tt("opacity")}, ${tt("color")} `,window.setTimeout(()=>i.style.transition+=`, ${tt("width")}, ${tt("height")}`,0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function Gi(t){t.style.cursor="grab"}function ji(t,e,o,i){yr(e,t);const l=e.getBoundingClientRect(),a=t.getBoundingClientRect(),u=l.width-a.width,d=l.height-a.height;if(u||d){const h={left:(o-a.left)/a.width,top:(i-a.top)/a.height};_r(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height=`${l.height}px`,t.style.width=`${l.width}px`),t.style.left=`${parseFloat(t.style.left)-h.left*u}px`,t.style.top=`${parseFloat(t.style.top)-h.top*d}px`}}function yr(t,e){const o=window.getComputedStyle(t);Array.from(o).filter(i=>i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||_r(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")).forEach(i=>e.style.setProperty(i,o.getPropertyValue(i),o.getPropertyPriority(i)))}function Zi(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function wr(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function Ji(t){t.style.visibility="hidden",t.setAttribute($n,"true")}function Hi(t){t.style.visibility="",t.removeAttribute($n)}function zt(t,e=()=>{},o=()=>[]){t.forEach(i=>{const l=e(i);Object.keys(l).forEach(a=>{i.style[a]=l[a]}),o(i).forEach(a=>i.classList.add(a))})}function Jt(t,e=()=>{},o=()=>[]){t.forEach(i=>{const l=e(i);Object.keys(l).forEach(a=>{i.style[a]=""}),o(i).forEach(a=>i.classList.contains(a)&&i.classList.remove(a))})}function Wi(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const o=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=o}}const Yi="--any--",Qi=100,Xi=20,Gn=3,jn={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Zn="data-is-dnd-original-dragged-item";let ve,ge,xe,ln,X,an,We,ye,Je,Te,rt=!1,Cn=!1,vn,Bt=!1,Vt=[],Ht;const Ce=new Map,oe=new Map,pn=new WeakMap;function Ki(t,e){Ce.has(e)||Ce.set(e,new Set),Ce.get(e).has(t)||(Ce.get(e).add(t),ur())}function Jn(t,e){Ce.get(e).delete(t),dr(),Ce.get(e).size===0&&Ce.delete(e)}function eo(){const t=Ce.get(ln);for(const i of t)i.addEventListener(nn,Er),i.addEventListener(kt,br),i.addEventListener(rn,Ir);window.addEventListener(Rn,xt);const e=Math.max(...Array.from(t.keys()).map(i=>oe.get(i).dropAnimationDurationMs)),o=e===0?Xi:Math.max(e,Qi);Ht=Li(t,()=>Te),Bi(ge,t,o*1.07,Ht)}function to(){const t=Ce.get(ln);for(const e of t)e.removeEventListener(nn,Er),e.removeEventListener(kt,br),e.removeEventListener(rn,Ir);window.removeEventListener(Rn,xt),Ht.destroy(),Ht=void 0,Ci()}function cn(t){return t.findIndex(e=>!!e[on])}function no(t){return{...t,[on]:!0,[de]:xi}}function Er(t){let{items:e,dropFromOthersDisabled:o}=oe.get(t.currentTarget);if(o&&t.currentTarget!==X)return;if(Bt=!1,e=e.filter(u=>u[de]!==We[de]),X!==t.currentTarget){const d=oe.get(X).items.filter(h=>!h[on]);Ye(X,d,{trigger:Ee.DRAGGED_ENTERED_ANOTHER,id:xe[de],source:De.POINTER})}const{index:i,isProximityBased:l}=t.detail.indexObj,a=l&&i===t.currentTarget.children.length-1?i+1:i;ye=t.currentTarget,e.splice(a,0,We),Ye(t.currentTarget,e,{trigger:Ee.DRAGGED_ENTERED,id:xe[de],source:De.POINTER})}function br(t){if(!rt)return;const{items:e,dropFromOthersDisabled:o}=oe.get(t.currentTarget);if(o&&t.currentTarget!==X&&t.currentTarget!==ye)return;const i=[...e],l=cn(i);l!==-1&&i.splice(l,1);const a=ye;ye=void 0;const{type:u,theOtherDz:d}=t.detail;if(u===jt.OUTSIDE_OF_ANY||u===jt.LEFT_FOR_ANOTHER&&d!==X&&oe.get(d).dropFromOthersDisabled){Bt=!0,ye=X;const h=a===X?i:[...oe.get(X).items];h.splice(an,0,We),Ye(X,h,{trigger:Ee.DRAGGED_LEFT_ALL,id:xe[de],source:De.POINTER})}Ye(t.currentTarget,i,{trigger:Ee.DRAGGED_LEFT,id:xe[de],source:De.POINTER})}function Ir(t){const{items:e,dropFromOthersDisabled:o}=oe.get(t.currentTarget);if(o&&t.currentTarget!==X)return;const i=[...e];Bt=!1;const{index:l}=t.detail.indexObj,a=cn(i);a!==-1&&i.splice(a,1),i.splice(l,0,We),Ye(t.currentTarget,i,{trigger:Ee.DRAGGED_OVER_INDEX,id:xe[de],source:De.POINTER})}function Wt(t){t.preventDefault();const e=t.touches?t.touches[0]:t;Te={x:e.clientX,y:e.clientY},ge.style.transform=`translate3d(${Te.x-Je.x}px, ${Te.y-Je.y}px, 0)`}function xt(){Cn=!0,window.removeEventListener("mousemove",Wt),window.removeEventListener("touchmove",Wt),window.removeEventListener("mouseup",xt),window.removeEventListener("touchend",xt),to(),Gi(ge),ye||(ye=X);let{items:t,type:e}=oe.get(ye);Jt(Ce.get(e),l=>oe.get(l).dropTargetStyle,l=>oe.get(l).dropTargetClasses);let o=cn(t);o===-1&&ye===X&&(o=an),t=t.map(l=>l[on]?xe:l);function i(){vn(),It(ye,t,{trigger:Bt?Ee.DROPPED_OUTSIDE_OF_ANY:Ee.DROPPED_INTO_ZONE,id:xe[de],source:De.POINTER}),ye!==X&&It(X,oe.get(X).items,{trigger:Ee.DROPPED_INTO_ANOTHER,id:xe[de],source:De.POINTER}),o!==-1&&Hi(ye.children[o]),oo()}ro(o,i)}function ro(t,e){const o=t>-1?En(ye.children[t]):En(ye),i={x:o.left-parseFloat(ge.style.left),y:o.top-parseFloat(ge.style.top)},{dropAnimationDurationMs:l}=oe.get(ye),a=`transform ${l}ms ease`;ge.style.transition=ge.style.transition?ge.style.transition+","+a:a,ge.style.transform=`translate3d(${i.x}px, ${i.y}px, 0)`,window.setTimeout(e,l)}function io(t,e){Vt.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{wr(t),document.body.appendChild(t)})}function oo(){ge.remove(),ve.remove(),Vt.length&&(Vt.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),Vt=[]),ge=void 0,ve=void 0,xe=void 0,ln=void 0,X=void 0,an=void 0,We=void 0,ye=void 0,Je=void 0,Te=void 0,rt=!1,Cn=!1,vn=void 0,Bt=!1}function so(t,e){let o=!1;const i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:jn,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let l=new Map;function a(){window.addEventListener("mousemove",h,{passive:!1}),window.addEventListener("touchmove",h,{passive:!1,capture:!1}),window.addEventListener("mouseup",d,{passive:!1}),window.addEventListener("touchend",d,{passive:!1})}function u(){window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",d),window.removeEventListener("touchend",d)}function d(p){u(),ve=void 0,Je=void 0,Te=void 0,p.type==="touchend"&&p.target.click()}function h(p){p.preventDefault();const _=p.touches?p.touches[0]:p;Te={x:_.clientX,y:_.clientY},(Math.abs(Te.x-Je.x)>=Gn||Math.abs(Te.y-Je.y)>=Gn)&&(u(),c())}function g(p){if(p.target!==p.currentTarget&&(p.target.value!==void 0||p.target.isContentEditable)||p.button||rt)return;p.preventDefault(),p.stopPropagation();const _=p.touches?p.touches[0]:p;Je={x:_.clientX,y:_.clientY},Te={...Je},ve=p.currentTarget,a()}function c(){rt=!0;const p=l.get(ve);an=p,X=ve.parentElement;const _=X.closest("dialog")||X.getRootNode(),b=_.body||_,{items:I,type:v,centreDraggedOnCursor:C}=i,x=[...I];xe=x[p],ln=v,We=no(xe),ge=qi(ve,C&&Te),ve.setAttribute(Zn,!0);function D(){ge.parentElement?window.requestAnimationFrame(D):(b.appendChild(ge),ge.focus(),eo(),wr(ve),b.appendChild(ve),We[de]=xe[de])}window.requestAnimationFrame(D),zt(Array.from(Ce.get(i.type)).filter(N=>N===X||!oe.get(N).dropFromOthersDisabled),N=>oe.get(N).dropTargetStyle,N=>oe.get(N).dropTargetClasses),x.splice(p,1,We),vn=Wi(X),Ye(X,x,{trigger:Ee.DRAG_STARTED,id:xe[de],source:De.POINTER}),window.addEventListener("mousemove",Wt,{passive:!1}),window.addEventListener("touchmove",Wt,{passive:!1,capture:!1}),window.addEventListener("mouseup",xt,{passive:!1}),window.addEventListener("touchend",xt,{passive:!1})}function y({items:p=void 0,flipDurationMs:_=0,type:b=Yi,dragDisabled:I=!1,morphDisabled:v=!1,dropFromOthersDisabled:C=!1,dropTargetStyle:x=jn,dropTargetClasses:D=[],transformDraggedElement:N=()=>{},centreDraggedOnCursor:O=!1}){i.dropAnimationDurationMs=_,i.type&&b!==i.type&&Jn(t,i.type),i.type=b,i.items=[...p],i.dragDisabled=I,i.morphDisabled=v,i.transformDraggedElement=N,i.centreDraggedOnCursor=O,o&&rt&&!Cn&&(!Ri(x,i.dropTargetStyle)||!$i(D,i.dropTargetClasses))&&(Jt([t],()=>i.dropTargetStyle,()=>D),zt([t],()=>x,()=>D)),i.dropTargetStyle=x,i.dropTargetClasses=[...D];function z(T,k){return oe.get(T)?oe.get(T)[k]:i[k]}o&&rt&&i.dropFromOthersDisabled!==C&&(C?Jt([t],T=>z(T,"dropTargetStyle"),T=>z(T,"dropTargetClasses")):zt([t],T=>z(T,"dropTargetStyle"),T=>z(T,"dropTargetClasses"))),i.dropFromOthersDisabled=C,oe.set(t,i),Ki(t,b);const F=cn(i.items);for(let T=0;T<t.children.length;T++){const k=t.children[T];if(Zi(k,I),T===F){v||ji(ge,k,Te.x,Te.y),i.transformDraggedElement(ge,xe,T),Ji(k);continue}k.removeEventListener("mousedown",pn.get(k)),k.removeEventListener("touchstart",pn.get(k)),I||(k.addEventListener("mousedown",g),k.addEventListener("touchstart",g),pn.set(k,g)),l.set(k,T),o||(o=!0)}}return y(e),{update:p=>{y(p)},destroy:()=>{function p(){Jn(t,oe.get(t).type),oe.delete(t)}rt&&!t.closest(`[${Zn}]`)?io(t,p):p()}}}const In={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},xr={[In.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[In.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},lo="dnd-action-aria-alert";let re;function xn(){re||(re=document.createElement("div"),function(){re.id=lo,re.style.position="fixed",re.style.bottom="0",re.style.left="0",re.style.zIndex="-5",re.style.opacity="0",re.style.height="0",re.style.width="0",re.setAttribute("role","alert")}(),document.body.prepend(re),Object.entries(xr).forEach(([t,e])=>document.body.prepend(fo(t,e))))}function ao(){return kn?null:(document.readyState==="complete"?xn():window.addEventListener("DOMContentLoaded",xn),{...In})}function co(){kn||!re||(Object.keys(xr).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),re.remove(),re=void 0)}function fo(t,e){const o=document.createElement("div");return o.id=t,o.innerHTML=`<p>${e}</p>`,o.style.display="none",o.style.position="fixed",o.style.zIndex="-5",o}function wt(t){if(kn)return;re||xn(),re.innerHTML="";const e=document.createTextNode(t);re.appendChild(e),re.style.display="none",re.style.display="inline"}const uo="--any--",Hn={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let $e=!1,Dn,we,ot="",nt,Le,He="";const Yt=new WeakSet,Wn=new WeakMap,Yn=new WeakMap,On=new Map,pe=new Map,Be=new Map;let Qt;function ho(t,e){Be.size===0&&(Qt=ao(),window.addEventListener("keydown",Dr),window.addEventListener("click",Or)),Be.has(e)||Be.set(e,new Set),Be.get(e).has(t)||(Be.get(e).add(t),ur())}function Qn(t,e){we===t&&$t(),Be.get(e).delete(t),dr(),Be.get(e).size===0&&Be.delete(e),Be.size===0&&(window.removeEventListener("keydown",Dr),window.removeEventListener("click",Or),Qt=void 0,co())}function Dr(t){if($e)switch(t.key){case"Escape":{$t();break}}}function Or(){$e&&(Yt.has(document.activeElement)||$t())}function mo(t){if(!$e)return;const e=t.currentTarget;if(e===we)return;ot=e.getAttribute("aria-label")||"";const{items:o}=pe.get(we),i=o.find(g=>g[de]===Le),l=o.indexOf(i),a=o.splice(l,1)[0],{items:u,autoAriaDisabled:d}=pe.get(e);e.getBoundingClientRect().top<we.getBoundingClientRect().top||e.getBoundingClientRect().left<we.getBoundingClientRect().left?(u.push(a),d||wt(`Moved item ${He} to the end of the list ${ot}`)):(u.unshift(a),d||wt(`Moved item ${He} to the beginning of the list ${ot}`)),It(we,o,{trigger:Ee.DROPPED_INTO_ANOTHER,id:Le,source:De.KEYBOARD}),It(e,u,{trigger:Ee.DROPPED_INTO_ZONE,id:Le,source:De.KEYBOARD}),we=e}function Ar(){On.forEach(({update:t},e)=>t(pe.get(e)))}function $t(t=!0){pe.get(we).autoAriaDisabled||wt(`Stopped dragging item ${He}`),Yt.has(document.activeElement)&&document.activeElement.blur(),t&&Ye(we,pe.get(we).items,{trigger:Ee.DRAG_STOPPED,id:Le,source:De.KEYBOARD}),Jt(Be.get(Dn),e=>pe.get(e).dropTargetStyle,e=>pe.get(e).dropTargetClasses),nt=null,Le=null,He="",Dn=null,we=null,ot="",$e=!1,Ar()}function po(t,e){const o={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Hn,dropTargetClasses:[],autoAriaDisabled:!1};function i(c,y,p){c.length<=1||c.splice(p,1,c.splice(y,1,c[p])[0])}function l(c){switch(c.key){case"Enter":case" ":{if((c.target.disabled!==void 0||c.target.href||c.target.isContentEditable)&&!Yt.has(c.target))return;c.preventDefault(),c.stopPropagation(),$e?$t():a(c);break}case"ArrowDown":case"ArrowRight":{if(!$e)return;c.preventDefault(),c.stopPropagation();const{items:y}=pe.get(t),p=Array.from(t.children),_=p.indexOf(c.currentTarget);_<p.length-1&&(o.autoAriaDisabled||wt(`Moved item ${He} to position ${_+2} in the list ${ot}`),i(y,_,_+1),It(t,y,{trigger:Ee.DROPPED_INTO_ZONE,id:Le,source:De.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!$e)return;c.preventDefault(),c.stopPropagation();const{items:y}=pe.get(t),_=Array.from(t.children).indexOf(c.currentTarget);_>0&&(o.autoAriaDisabled||wt(`Moved item ${He} to position ${_} in the list ${ot}`),i(y,_,_-1),It(t,y,{trigger:Ee.DROPPED_INTO_ZONE,id:Le,source:De.KEYBOARD}));break}}}function a(c){d(c.currentTarget),we=t,Dn=o.type,$e=!0;const y=Array.from(Be.get(o.type)).filter(p=>p===we||!pe.get(p).dropFromOthersDisabled);if(zt(y,p=>pe.get(p).dropTargetStyle,p=>pe.get(p).dropTargetClasses),!o.autoAriaDisabled){let p=`Started dragging item ${He}. Use the arrow keys to move it within its list ${ot}`;y.length>1&&(p+=", or tab to another list in order to move the item into it"),wt(p)}Ye(t,pe.get(t).items,{trigger:Ee.DRAG_STARTED,id:Le,source:De.KEYBOARD}),Ar()}function u(c){$e&&c.currentTarget!==nt&&(c.stopPropagation(),$t(!1),a(c))}function d(c){const{items:y}=pe.get(t),p=Array.from(t.children),_=p.indexOf(c);nt=c,nt.tabIndex=o.zoneItemTabIndex,Le=y[_][de],He=p[_].getAttribute("aria-label")||""}function h({items:c=[],type:y=uo,dragDisabled:p=!1,zoneTabIndex:_=0,zoneItemTabIndex:b=0,dropFromOthersDisabled:I=!1,dropTargetStyle:v=Hn,dropTargetClasses:C=[],autoAriaDisabled:x=!1}){o.items=[...c],o.dragDisabled=p,o.dropFromOthersDisabled=I,o.zoneTabIndex=_,o.zoneItemTabIndex=b,o.dropTargetStyle=v,o.dropTargetClasses=C,o.autoAriaDisabled=x,o.type&&y!==o.type&&Qn(t,o.type),o.type=y,ho(t,y),x||(t.setAttribute("aria-disabled",p),t.setAttribute("role","list"),t.setAttribute("aria-describedby",p?Qt.DND_ZONE_DRAG_DISABLED:Qt.DND_ZONE_ACTIVE)),pe.set(t,o),$e?t.tabIndex=t===we||nt.contains(t)||o.dropFromOthersDisabled||we&&o.type!==pe.get(we).type?-1:0:t.tabIndex=o.zoneTabIndex,t.addEventListener("focus",mo);for(let D=0;D<t.children.length;D++){const N=t.children[D];Yt.add(N),N.tabIndex=$e?-1:o.zoneItemTabIndex,x||N.setAttribute("role","listitem"),N.removeEventListener("keydown",Wn.get(N)),N.removeEventListener("click",Yn.get(N)),p||(N.addEventListener("keydown",l),Wn.set(N,l),N.addEventListener("click",u),Yn.set(N,u)),$e&&o.items[D][de]===Le&&(nt=N,nt.tabIndex=o.zoneItemTabIndex,N.focus())}}h(e);const g={update:c=>{h(c)},destroy:()=>{Qn(t,o.type),pe.delete(t),On.delete(t)}};return On.set(t,g),g}function Fn(t,e){if(go(t))return{update:()=>{},destroy:()=>{}};Xn(e);const o=so(t,e),i=po(t,e);return{update:l=>{Xn(l),o.update(l),i.update(l)},destroy:()=>{o.destroy(),i.destroy()}}}function go(t){return!!t.closest(`[${Ii}="true"]`)}function Xn(t){const{items:e,flipDurationMs:o,type:i,dragDisabled:l,morphDisabled:a,dropFromOthersDisabled:u,zoneTabIndex:d,zoneItemTabIndex:h,dropTargetStyle:g,dropTargetClasses:c,transformDraggedElement:y,autoAriaDisabled:p,centreDraggedOnCursor:_,...b}=t;if(Object.keys(b).length>0&&console.warn("dndzone will ignore unknown options",b),!e)throw new Error("no 'items' key provided to dndzone");const I=e.find(v=>!{}.hasOwnProperty.call(v,de));if(I)throw new Error(`missing '${de}' property for item ${Pt(I)}`);if(c&&!Array.isArray(c))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof c}, ${Pt(c)}`);if(d&&!Kn(d))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof d}, ${Pt(d)}`);if(h&&!Kn(h))throw new Error(`zoneItemTabIndex should be a number but instead it is a ${typeof h}, ${Pt(h)}`)}function Kn(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function _o(t){let e,o=t[0].name+"",i,l,a=t[0].cost+"",u,d;return{c(){e=U("div"),i=st(o),l=ae(),u=st(a),G(e,"class",d="h-[8.5rem] w-[6rem] rounded border border-black "+t[1])},m(h,g){Se(h,e,g),R(e,i),R(e,l),R(e,u)},p(h,[g]){g&1&&o!==(o=h[0].name+"")&&Gt(i,o),g&1&&a!==(a=h[0].cost+"")&&Gt(u,a),g&2&&d!==(d="h-[8.5rem] w-[6rem] rounded border border-black "+h[1])&&G(e,"class",d)},i:ze,o:ze,d(h){h&&Oe(e)}}}function yo(t,e,o){let{card:i}=e,{extraClasses:l=""}=e;return t.$$set=a=>{"card"in a&&o(0,i=a.card),"extraClasses"in a&&o(1,l=a.extraClasses)},[i,l]}class fn extends ct{constructor(e){super(),at(this,e,yo,_o,lt,{card:0,extraClasses:1})}}function er(t,e,o){const i=t.slice();return i[4]=e[o],i[6]=o,i}function tr(t,e){let o,i,l;return i=new fn({props:{card:e[4]}}),{key:t,first:null,c(){o=qt(),ne(i.$$.fragment),this.first=o},m(a,u){Se(a,o,u),Y(i,a,u),l=!0},p(a,u){e=a;const d={};u&1&&(d.card=e[4]),i.$set(d)},i(a){l||(j(i.$$.fragment,a),l=!0)},o(a){Z(i.$$.fragment,a),l=!1},d(a){a&&Oe(o),Q(i,a)}}}function wo(t){let e,o,i,l,a=[],u=new Map,d,h,g,c,y=bt(t[0]);const p=_=>_[4].id;for(let _=0;_<y.length;_+=1){let b=er(t,y,_),I=p(b);u.set(I,a[_]=tr(I,b))}return{c(){e=U("div"),o=st(t[1]),i=ae(),l=U("div");for(let _=0;_<a.length;_+=1)a[_].c();G(l,"class","grid min-h-[8.5rem] min-w-[6rem] gap-x-1"),Mn(l,"grid-template-columns","repeat("+t[2]+", minmax(0, 1fr))")},m(_,b){Se(_,e,b),R(e,o),R(e,i),R(e,l);for(let I=0;I<a.length;I+=1)a[I]&&a[I].m(l,null);h=!0,g||(c=[An(d=Fn.call(null,l,{items:t[0]})),Et(l,"consider",t[3]),Et(l,"finalize",t[3])],g=!0)},p(_,[b]){(!h||b&2)&&Gt(o,_[1]),b&1&&(y=bt(_[0]),Kt(),a=Sn(a,b,p,1,_,y,u,l,Tn,tr,null,er),en()),(!h||b&4)&&Mn(l,"grid-template-columns","repeat("+_[2]+", minmax(0, 1fr))"),d&&Dt(d.update)&&b&1&&d.update.call(null,{items:_[0]})},i(_){if(!h){for(let b=0;b<y.length;b+=1)j(a[b]);h=!0}},o(_){for(let b=0;b<a.length;b+=1)Z(a[b]);h=!1},d(_){_&&Oe(e);for(let b=0;b<a.length;b+=1)a[b].d();g=!1,Ve(c)}}}function Eo(t,e,o){let{area:i}=e,{name:l}=e,{col:a=6}=e;function u(d){o(0,i=d.detail.items)}return t.$$set=d=>{"area"in d&&o(0,i=d.area),"name"in d&&o(1,l=d.name),"col"in d&&o(2,a=d.col)},[i,l,a,u]}class Xt extends ct{constructor(e){super(),at(this,e,Eo,wo,lt,{area:0,name:1,col:2})}}function nr(t,e,o){const i=t.slice();return i[3]=e[o],i[5]=o,i}function rr(t,e){let o,i,l,a;return i=new fn({props:{card:e[3]}}),{key:t,first:null,c(){o=qt(),ne(i.$$.fragment),l=ae(),this.first=o},m(u,d){Se(u,o,d),Y(i,u,d),Se(u,l,d),a=!0},p(u,d){e=u;const h={};d&1&&(h.card=e[3]),i.$set(h)},i(u){a||(j(i.$$.fragment,u),a=!0)},o(u){Z(i.$$.fragment,u),a=!1},d(u){u&&(Oe(o),Oe(l)),Q(i,u)}}}function bo(t){let e,o,i,l=[],a=new Map,u,d,h,g,c=bt(t[0]);const y=p=>p[3].id;for(let p=0;p<c.length;p+=1){let _=nr(t,c,p),b=y(_);a.set(b,l[p]=rr(b,_))}return{c(){e=U("div"),o=st(`Reality\r
    `),i=U("div");for(let p=0;p<l.length;p+=1)l[p].c();G(i,"class","grid max-h-[13.25rem] min-h-[12rem] min-w-[20rem] grid-cols-6 gap-x-1 overflow-hidden")},m(p,_){Se(p,e,_),R(e,o),R(e,i);for(let b=0;b<l.length;b+=1)l[b]&&l[b].m(i,null);d=!0,h||(g=[An(u=Fn.call(null,i,{items:t[0],dropFromOthersDisabled:t[1]})),Et(i,"consider",t[2]),Et(i,"finalize",t[2])],h=!0)},p(p,[_]){_&1&&(c=bt(p[0]),Kt(),l=Sn(l,_,y,1,p,c,a,i,Tn,rr,null,nr),en()),u&&Dt(u.update)&&_&3&&u.update.call(null,{items:p[0],dropFromOthersDisabled:p[1]})},i(p){if(!d){for(let _=0;_<c.length;_+=1)j(l[_]);d=!0}},o(p){for(let _=0;_<l.length;_+=1)Z(l[_]);d=!1},d(p){p&&Oe(e);for(let _=0;_<l.length;_+=1)l[_].d();h=!1,Ve(g)}}}function Io(t,e,o){let i,{area:l}=e;function a(u){o(0,l=u.detail.items)}return t.$$set=u=>{"area"in u&&o(0,l=u.area)},t.$$.update=()=>{t.$$.dirty&1&&o(1,i=l.length>=ui)},[l,i,a]}class Tr extends ct{constructor(e){super(),at(this,e,Io,bo,lt,{area:0})}}function ir(t,e,o){const i=t.slice();return i[5]=e[o],i[7]=o,i}function xo(t){let e;return{c(){e=U("div")},m(o,i){Se(o,e,i)},p:ze,i:ze,o:ze,d(o){o&&Oe(e)}}}function Do(t){let e,o;return e=new fn({props:{card:t[5],extraClasses:"!w-2 overflow-hidden border-r-0 rounded-r-none text-nowrap"}}),{c(){ne(e.$$.fragment)},m(i,l){Y(e,i,l),o=!0},p(i,l){const a={};l&1&&(a.card=i[5]),e.$set(a)},i(i){o||(j(e.$$.fragment,i),o=!0)},o(i){Z(e.$$.fragment,i),o=!1},d(i){Q(e,i)}}}function Oo(t){let e,o;return e=new fn({props:{card:t[5]}}),{c(){ne(e.$$.fragment)},m(i,l){Y(e,i,l),o=!0},p(i,l){const a={};l&1&&(a.card=i[5]),e.$set(a)},i(i){o||(j(e.$$.fragment,i),o=!0)},o(i){Z(e.$$.fragment,i),o=!1},d(i){Q(e,i)}}}function or(t,e){let o,i,l,a,u;const d=[Oo,Do,xo],h=[];function g(c,y){return c[7]===c[0].length-1?0:c[7]===c[0].length-2?1:2}return i=g(e),l=h[i]=d[i](e),{key:t,first:null,c(){o=qt(),l.c(),a=qt(),this.first=o},m(c,y){Se(c,o,y),h[i].m(c,y),Se(c,a,y),u=!0},p(c,y){e=c;let p=i;i=g(e),i===p?h[i].p(e,y):(Kt(),Z(h[p],1,1,()=>{h[p]=null}),en(),l=h[i],l?l.p(e,y):(l=h[i]=d[i](e),l.c()),j(l,1),l.m(a.parentNode,a))},i(c){u||(j(l),u=!0)},o(c){Z(l),u=!1},d(c){c&&(Oe(o),Oe(a)),h[i].d(c)}}}function Ao(t){let e,o,i,l,a=[],u=new Map,d,h,g,c,y=bt(t[0]);const p=_=>_[5].id;for(let _=0;_<y.length;_+=1){let b=ir(t,y,_),I=p(b);u.set(I,a[_]=or(I,b))}return{c(){e=U("div"),o=st(t[1]),i=ae(),l=U("div");for(let _=0;_<a.length;_+=1)a[_].c();G(l,"class","flex h-[8.5rem] w-[6rem] rounded shadow-inner")},m(_,b){Se(_,e,b),R(e,o),R(e,i),R(e,l);for(let I=0;I<a.length;I+=1)a[I]&&a[I].m(l,null);h=!0,g||(c=[An(d=Fn.call(null,l,{items:t[0]})),Et(l,"consider",t[3]),Et(l,"finalize",t[2])],g=!0)},p(_,[b]){(!h||b&2)&&Gt(o,_[1]),b&1&&(y=bt(_[0]),Kt(),a=Sn(a,b,p,1,_,y,u,l,Tn,or,null,ir),en()),d&&Dt(d.update)&&b&1&&d.update.call(null,{items:_[0]})},i(_){if(!h){for(let b=0;b<y.length;b+=1)j(a[b]);h=!0}},o(_){for(let b=0;b<a.length;b+=1)Z(a[b]);h=!1},d(_){_&&Oe(e);for(let b=0;b<a.length;b+=1)a[b].d();g=!1,Ve(c)}}}function To(t,e,o){let{deck:i}=e,{name:l}=e;function a(h,g){let c=i.find(p=>p.id===h.id),y=i.find(p=>p.id===g.id);return c&&y?0:c&&!y?-1:!c&&y?1:0}function u(h){o(0,i=h.detail.items.sort(a))}function d(h){o(0,i=h.detail.items.sort(a))}return t.$$set=h=>{"deck"in h&&o(0,i=h.deck),"name"in h&&o(1,l=h.name)},[i,l,u,d]}class Me extends ct{constructor(e){super(),at(this,e,To,Ao,lt,{deck:0,name:1})}}function So(t){let e,o,i,l,a,u,d,h,g,c,y,p,_,b,I,v,C,x,D,N,O,z,F,T,k,K,L,he,S,P,_e,Pe,V,me,ce;function be(A){t[1](A)}let ke={name:"Combat"};t[0].combatArea!==void 0&&(ke.area=t[0].combatArea),l=new Xt({props:ke}),ie.push(()=>ue(l,"area",be));function Ue(A){t[2](A)}let ft={name:"Memory"};t[0].memDiscard!==void 0&&(ft.deck=t[0].memDiscard),h=new Me({props:ft}),ie.push(()=>ue(h,"deck",Ue));function W(A){t[3](A)}let se={};t[0].reality!==void 0&&(se.area=t[0].reality),b=new Tr({props:se}),ie.push(()=>ue(b,"area",W));function Qe(A){t[4](A)}let Xe={name:"Hand"};t[0].hand!==void 0&&(Xe.area=t[0].hand),x=new Xt({props:Xe}),ie.push(()=>ue(x,"area",Qe));function Ke(A){t[5](A)}let $={name:"Channeled"};t[0].channeled!==void 0&&($.deck=t[0].channeled),F=new Me({props:$}),ie.push(()=>ue(F,"deck",Ke));function Ie(A){t[6](A)}let Ne={name:"Void"};t[0].voidPile!==void 0&&(Ne.deck=t[0].voidPile),K=new Me({props:Ne}),ie.push(()=>ue(K,"deck",Ie));function qe(A){t[7](A)}let Ge={name:"Random"};t[0].randomZone!==void 0&&(Ge.deck=t[0].randomZone),P=new Me({props:Ge}),ie.push(()=>ue(P,"deck",qe));function ut(A){t[8](A)}let je={name:"Deck"};return t[0].deck!==void 0&&(je.deck=t[0].deck),V=new Me({props:je}),ie.push(()=>ue(V,"deck",ut)),{c(){e=U("div"),o=U("div"),i=U("div"),ne(l.$$.fragment),u=ae(),d=U("div"),ne(h.$$.fragment),c=ae(),y=U("div"),p=U("div"),_=U("div"),ne(b.$$.fragment),v=ae(),C=U("div"),ne(x.$$.fragment),N=ae(),O=U("div"),z=U("div"),ne(F.$$.fragment),k=ae(),ne(K.$$.fragment),he=ae(),S=U("div"),ne(P.$$.fragment),Pe=ae(),ne(V.$$.fragment),G(i,"class","min-w-2/3 rounded border border-black p-1"),G(d,"class","min-w-1/3 rounded border border-black p-1"),G(o,"class","flex flex-row gap-1"),G(_,"class","rounded border border-black p-1"),G(C,"class","rounded border border-black p-1"),G(p,"class","flex flex-col"),G(z,"class","flex flex-row gap-1"),G(S,"class","flex flex-row gap-1"),G(O,"class","flex h-fit flex-col gap-1 rounded border border-black p-1"),G(y,"class","flex flex-row gap-1"),G(e,"class","flex flex-col gap-1")},m(A,le){Se(A,e,le),R(e,o),R(o,i),Y(l,i,null),R(o,u),R(o,d),Y(h,d,null),R(e,c),R(e,y),R(y,p),R(p,_),Y(b,_,null),R(p,v),R(p,C),Y(x,C,null),R(y,N),R(y,O),R(O,z),Y(F,z,null),R(z,k),Y(K,z,null),R(O,he),R(O,S),Y(P,S,null),R(S,Pe),Y(V,S,null),ce=!0},p(A,[le]){const Ct={};!a&&le&1&&(a=!0,Ct.area=A[0].combatArea,fe(()=>a=!1)),l.$set(Ct);const vt={};!g&&le&1&&(g=!0,vt.deck=A[0].memDiscard,fe(()=>g=!1)),h.$set(vt);const dt={};!I&&le&1&&(I=!0,dt.area=A[0].reality,fe(()=>I=!1)),b.$set(dt);const Ft={};!D&&le&1&&(D=!0,Ft.area=A[0].hand,fe(()=>D=!1)),x.$set(Ft);const Lt={};!T&&le&1&&(T=!0,Lt.deck=A[0].channeled,fe(()=>T=!1)),F.$set(Lt);const Ot={};!L&&le&1&&(L=!0,Ot.deck=A[0].voidPile,fe(()=>L=!1)),K.$set(Ot);const et={};!_e&&le&1&&(_e=!0,et.deck=A[0].randomZone,fe(()=>_e=!1)),P.$set(et);const Ae={};!me&&le&1&&(me=!0,Ae.deck=A[0].deck,fe(()=>me=!1)),V.$set(Ae)},i(A){ce||(j(l.$$.fragment,A),j(h.$$.fragment,A),j(b.$$.fragment,A),j(x.$$.fragment,A),j(F.$$.fragment,A),j(K.$$.fragment,A),j(P.$$.fragment,A),j(V.$$.fragment,A),ce=!0)},o(A){Z(l.$$.fragment,A),Z(h.$$.fragment,A),Z(b.$$.fragment,A),Z(x.$$.fragment,A),Z(F.$$.fragment,A),Z(K.$$.fragment,A),Z(P.$$.fragment,A),Z(V.$$.fragment,A),ce=!1},d(A){A&&Oe(e),Q(l),Q(h),Q(b),Q(x),Q(F),Q(K),Q(P),Q(V)}}}function No(t,e,o){let{playArea:i}=e;function l(p){t.$$.not_equal(i.combatArea,p)&&(i.combatArea=p,o(0,i))}function a(p){t.$$.not_equal(i.memDiscard,p)&&(i.memDiscard=p,o(0,i))}function u(p){t.$$.not_equal(i.reality,p)&&(i.reality=p,o(0,i))}function d(p){t.$$.not_equal(i.hand,p)&&(i.hand=p,o(0,i))}function h(p){t.$$.not_equal(i.channeled,p)&&(i.channeled=p,o(0,i))}function g(p){t.$$.not_equal(i.voidPile,p)&&(i.voidPile=p,o(0,i))}function c(p){t.$$.not_equal(i.randomZone,p)&&(i.randomZone=p,o(0,i))}function y(p){t.$$.not_equal(i.deck,p)&&(i.deck=p,o(0,i))}return t.$$set=p=>{"playArea"in p&&o(0,i=p.playArea)},[i,l,a,u,d,h,g,c,y]}class Ro extends ct{constructor(e){super(),at(this,e,No,So,lt,{playArea:0})}}function $o(t){let e,o,i,l,a,u,d,h,g,c,y,p,_,b,I,v,C,x,D,N,O,z,F,T,k,K,L,he,S,P;function _e($){t[1]($)}let Pe={};t[0].reality!==void 0&&(Pe.area=t[0].reality),l=new Tr({props:Pe}),ie.push(()=>ue(l,"area",_e));function V($){t[2]($)}let me={name:"Combat"};t[0].combatArea!==void 0&&(me.area=t[0].combatArea),g=new Xt({props:me}),ie.push(()=>ue(g,"area",V));function ce($){t[3]($)}let be={name:"Memory"};t[0].memDiscard!==void 0&&(be.deck=t[0].memDiscard),_=new Me({props:be}),ie.push(()=>ue(_,"deck",ce));function ke($){t[4]($)}let Ue={name:"Channeled"};t[0].channeled!==void 0&&(Ue.deck=t[0].channeled),x=new Me({props:Ue}),ie.push(()=>ue(x,"deck",ke));function ft($){t[5]($)}let W={name:"Void"};t[0].voidPile!==void 0&&(W.deck=t[0].voidPile),O=new Me({props:W}),ie.push(()=>ue(O,"deck",ft));function se($){t[6]($)}let Qe={name:"Random"};t[0].randomZone!==void 0&&(Qe.deck=t[0].randomZone),k=new Me({props:Qe}),ie.push(()=>ue(k,"deck",se));function Xe($){t[7]($)}let Ke={name:"Deck"};return t[0].deck!==void 0&&(Ke.deck=t[0].deck),he=new Me({props:Ke}),ie.push(()=>ue(he,"deck",Xe)),{c(){e=U("div"),o=U("div"),i=U("div"),ne(l.$$.fragment),u=ae(),d=U("div"),h=U("div"),ne(g.$$.fragment),y=ae(),p=U("div"),ne(_.$$.fragment),I=ae(),v=U("div"),C=U("div"),ne(x.$$.fragment),N=ae(),ne(O.$$.fragment),F=ae(),T=U("div"),ne(k.$$.fragment),L=ae(),ne(he.$$.fragment),G(i,"class","max-w-fit rounded border border-black p-1"),G(h,"class","h-fit rounded border border-black p-1"),G(p,"class","h-fit rounded border border-black p-1"),G(d,"class","flex min-w-fit flex-row"),G(o,"class","flex flex-col"),G(C,"class","flex flex-row gap-1"),G(T,"class","flex flex-row gap-1"),G(v,"class","h-fit rounded border border-black p-1"),G(e,"class","flex flex-row gap-1")},m($,Ie){Se($,e,Ie),R(e,o),R(o,i),Y(l,i,null),R(o,u),R(o,d),R(d,h),Y(g,h,null),R(d,y),R(d,p),Y(_,p,null),R(e,I),R(e,v),R(v,C),Y(x,C,null),R(C,N),Y(O,C,null),R(v,F),R(v,T),Y(k,T,null),R(T,L),Y(he,T,null),P=!0},p($,[Ie]){const Ne={};!a&&Ie&1&&(a=!0,Ne.area=$[0].reality,fe(()=>a=!1)),l.$set(Ne);const qe={};!c&&Ie&1&&(c=!0,qe.area=$[0].combatArea,fe(()=>c=!1)),g.$set(qe);const Ge={};!b&&Ie&1&&(b=!0,Ge.deck=$[0].memDiscard,fe(()=>b=!1)),_.$set(Ge);const ut={};!D&&Ie&1&&(D=!0,ut.deck=$[0].channeled,fe(()=>D=!1)),x.$set(ut);const je={};!z&&Ie&1&&(z=!0,je.deck=$[0].voidPile,fe(()=>z=!1)),O.$set(je);const A={};!K&&Ie&1&&(K=!0,A.deck=$[0].randomZone,fe(()=>K=!1)),k.$set(A);const le={};!S&&Ie&1&&(S=!0,le.deck=$[0].deck,fe(()=>S=!1)),he.$set(le)},i($){P||(j(l.$$.fragment,$),j(g.$$.fragment,$),j(_.$$.fragment,$),j(x.$$.fragment,$),j(O.$$.fragment,$),j(k.$$.fragment,$),j(he.$$.fragment,$),P=!0)},o($){Z(l.$$.fragment,$),Z(g.$$.fragment,$),Z(_.$$.fragment,$),Z(x.$$.fragment,$),Z(O.$$.fragment,$),Z(k.$$.fragment,$),Z(he.$$.fragment,$),P=!1},d($){$&&Oe(e),Q(l),Q(g),Q(_),Q(x),Q(O),Q(k),Q(he)}}}function ko(t,e,o){let{playArea:i}=e;function l(y){t.$$.not_equal(i.reality,y)&&(i.reality=y,o(0,i))}function a(y){t.$$.not_equal(i.combatArea,y)&&(i.combatArea=y,o(0,i))}function u(y){t.$$.not_equal(i.memDiscard,y)&&(i.memDiscard=y,o(0,i))}function d(y){t.$$.not_equal(i.channeled,y)&&(i.channeled=y,o(0,i))}function h(y){t.$$.not_equal(i.voidPile,y)&&(i.voidPile=y,o(0,i))}function g(y){t.$$.not_equal(i.randomZone,y)&&(i.randomZone=y,o(0,i))}function c(y){t.$$.not_equal(i.deck,y)&&(i.deck=y,o(0,i))}return t.$$set=y=>{"playArea"in y&&o(0,i=y.playArea)},[i,l,a,u,d,h,g,c]}class Bo extends ct{constructor(e){super(),at(this,e,ko,$o,lt,{playArea:0})}}function Co(t){let e,o,i,l,a,u,d,h,g,c,y,p,_,b;function I(O){t[3](O)}let v={name:"Dream",col:1};t[2]!==void 0&&(v.area=t[2]),i=new Xt({props:v}),ie.push(()=>ue(i,"area",I));function C(O){t[4](O)}let x={};t[1]!==void 0&&(x.playArea=t[1]),h=new Bo({props:x}),ie.push(()=>ue(h,"playArea",C));function D(O){t[5](O)}let N={};return t[0]!==void 0&&(N.playArea=t[0]),p=new Ro({props:N}),ie.push(()=>ue(p,"playArea",D)),{c(){e=U("div"),o=U("div"),ne(i.$$.fragment),a=ae(),u=U("div"),d=U("div"),ne(h.$$.fragment),c=ae(),y=U("div"),ne(p.$$.fragment),G(o,"class","shrink-0 rounded border border-black"),G(d,"class","shrink-0 border-b border-black pb-1"),G(y,"class","shrink-0"),G(u,"class","flex flex-col gap-1"),G(e,"class","flex h-screen max-h-screen min-w-[65rem] flex-row gap-2 p-1")},m(O,z){Se(O,e,z),R(e,o),Y(i,o,null),R(e,a),R(e,u),R(u,d),Y(h,d,null),R(u,c),R(u,y),Y(p,y,null),b=!0},p(O,[z]){const F={};!l&&z&4&&(l=!0,F.area=O[2],fe(()=>l=!1)),i.$set(F);const T={};!g&&z&2&&(g=!0,T.playArea=O[1],fe(()=>g=!1)),h.$set(T);const k={};!_&&z&1&&(_=!0,k.playArea=O[0],fe(()=>_=!1)),p.$set(k)},i(O){b||(j(i.$$.fragment,O),j(h.$$.fragment,O),j(p.$$.fragment,O),b=!0)},o(O){Z(i.$$.fragment,O),Z(h.$$.fragment,O),Z(p.$$.fragment,O),b=!1},d(O){O&&Oe(e),Q(i),Q(h),Q(p)}}}function vo(t,e,o){let i={reality:[],channeled:[],combatArea:[],deck:[],hand:[],memDiscard:[],randomZone:[],voidPile:[]},l={reality:[],channeled:[],combatArea:[],deck:[],hand:[],memDiscard:[],randomZone:[],voidPile:[]},a=[];vr(async function(){let g=await mi();o(0,i.reality=g.slice(0,12),i),o(1,l.reality=g.slice(12,24),l)});function u(g){a=g,o(2,a)}function d(g){l=g,o(1,l)}function h(g){i=g,o(0,i)}return[i,l,a,u,d,h]}class Fo extends ct{constructor(e){super(),at(this,e,vo,Co,lt,{})}}new Fo({target:document.getElementById("app")});
